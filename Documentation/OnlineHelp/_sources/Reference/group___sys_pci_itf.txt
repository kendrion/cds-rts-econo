.. first line of composition.rst template

.. first line of group.rst template

.. _group___sys_pci_itf:

=========
SysPciItf
=========

Interface of SysPci. :ref:`More... <group___sys_pci_itf-details>`

Modules
-------

- :ref:`PCI_INFO <group___sys_pci_itf___p_c_i___i_n_f_o>`

- :ref:`Settings <group___sys_pci_itf___settings>`

- :ref:`Static defines <group___sys_pci_itf___staticdefines>`

Data Structures
---------------

- struct :ref:`tagsyspcigetcardinfo_struct <structtagsyspcigetcardinfo__struct>`

- struct :ref:`tagsyspcigetconfigentry_struct <structtagsyspcigetconfigentry__struct>`

- struct :ref:`tagsyspcireadvalue_struct <structtagsyspcireadvalue__struct>`

- struct :ref:`tagsyspcisetconfigentry_struct <structtagsyspcisetconfigentry__struct>`

- struct :ref:`tagsyspciwritevalue_struct <structtagsyspciwritevalue__struct>`

- struct :ref:`ISysPci_C <struct_i_sys_pci___c>`

Macros
------

- #define :ref:`ITF_SysPci <group___sys_pci_itf_1gaae6dcdb15b7d9fe060529c7d1a196bc5>`

- #define :ref:`EXTITF_SysPci <group___sys_pci_itf_1gaca862454545f1190204e7594b1a5a06b>`

Typedefs
--------

- typedef struct :ref:`tagsyspcigetcardinfo_struct <structtagsyspcigetcardinfo__struct>` :ref:`syspcigetcardinfo_struct <group___sys_pci_itf_1ga6292de9be1cdd46fdcf89683eabac42c>`

- typedef struct :ref:`tagsyspcigetconfigentry_struct <structtagsyspcigetconfigentry__struct>` :ref:`syspcigetconfigentry_struct <group___sys_pci_itf_1ga9cb8f3151f93585bcf6296ec62e4be8b>`

- typedef struct :ref:`tagsyspcireadvalue_struct <structtagsyspcireadvalue__struct>` :ref:`syspcireadvalue_struct <group___sys_pci_itf_1ga44d101393a4dd9fe548328b9720e5087>`

- typedef struct :ref:`tagsyspcisetconfigentry_struct <structtagsyspcisetconfigentry__struct>` :ref:`syspcisetconfigentry_struct <group___sys_pci_itf_1ga3e5c864c1733f2cb9a8f30436d10e930>`

- typedef struct :ref:`tagsyspciwritevalue_struct <structtagsyspciwritevalue__struct>` :ref:`syspciwritevalue_struct <group___sys_pci_itf_1ga03537fbab9fed237d6708e6abdcec786>`

- typedef :ref:`ISysPci_C <struct_i_sys_pci___c>` :ref:`ISysPci <group___sys_pci_itf_1gabc431428ede90a107db480999568fcdb>`

Functions
---------

- void :ref:`syspcigetcardinfo <group___sys_pci_itf_1ga35199310ecb9821d041eb849e59190f4>` (:ref:`syspcigetcardinfo_struct <group___sys_pci_itf_1ga6292de9be1cdd46fdcf89683eabac42c>` * p)

- void :ref:`syspcigetconfigentry <group___sys_pci_itf_1gadc51899130bbf0325a8496abb6ee3856>` (:ref:`syspcigetconfigentry_struct <group___sys_pci_itf_1ga9cb8f3151f93585bcf6296ec62e4be8b>` * p)

- void :ref:`syspcireadvalue <group___sys_pci_itf_1ga91922372903a846c6ac440a09b5b3660>` (:ref:`syspcireadvalue_struct <group___sys_pci_itf_1ga44d101393a4dd9fe548328b9720e5087>` * p)

- void :ref:`syspcisetconfigentry <group___sys_pci_itf_1ga23050543550a249029f73e12bba89576>` (:ref:`syspcisetconfigentry_struct <group___sys_pci_itf_1ga3e5c864c1733f2cb9a8f30436d10e930>` * p)

- void :ref:`syspciwritevalue <group___sys_pci_itf_1ga5a89d8898154a71120c9f20cdc440317>` (:ref:`syspciwritevalue_struct <group___sys_pci_itf_1ga03537fbab9fed237d6708e6abdcec786>` * p)

- RTS_RESULT :ref:`SysPciOSInit <group___sys_pci_itf_1ga6f117919f89a847aa224db50a80a25d8>` (INIT_STRUCT * pInit)

- RTS_RESULT :ref:`SysPciOSHookFunction <group___sys_pci_itf_1ga4f1cadc5ba6a706e09fa19e005b60039>` (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)

- RTS_RESULT :ref:`SysPciGetCardInfo <group___sys_pci_itf_1ga701df9befb17a2f027996fec4456e45a>` (unsigned short usVendorId, unsigned short usDeviceId, unsigned short usCardIndex, :ref:`PCI_INFO <group___sys_pci_itf___p_c_i___i_n_f_o_1gaed5948d035c6175ad9ef38cd4bc25d21>` * pPciInfo)

- RTS_RESULT :ref:`SysPciGetConfigEntry <group___sys_pci_itf_1ga9fb67b125d5734a51d082f31433d1215>` (unsigned short usBus, unsigned short usDevice, unsigned short usFunction, :ref:`PCI_INFO <group___sys_pci_itf___p_c_i___i_n_f_o_1gaed5948d035c6175ad9ef38cd4bc25d21>` * pPciInfo)

- RTS_RESULT :ref:`SysPciSetConfigEntry <group___sys_pci_itf_1gace0e47c9fa9d4b07b04cad155b687629>` (unsigned short usBus, unsigned short usDevice, unsigned short usFunction, :ref:`PCI_INFO <group___sys_pci_itf___p_c_i___i_n_f_o_1gaed5948d035c6175ad9ef38cd4bc25d21>` * pPciInfo)

- RTS_RESULT :ref:`SysPciWriteValue <group___sys_pci_itf_1gada82541621c4fab66735cdb00e3720f3>` (unsigned short usBus, unsigned short usDevice, unsigned short usFunction, unsigned short usPciOffset, unsigned char * pbyData, unsigned short usSize)

- RTS_RESULT :ref:`SysPciReadValue <group___sys_pci_itf_1gae96b9d709b4d611fd56f2214e8de797f>` (unsigned short usBus, unsigned short usDevice, unsigned short usFunction, unsigned short usPciOffset, unsigned char * pbyData, unsigned short usSize)

.. _group___sys_pci_itf-details:

Detailed Description
--------------------

Interface of SysPci.

The SysPci interface is projected to get access to the PCI bus on a target. This interface can only be used on architectures with a PCI bus.

**Copyright:**

Copyright (c) 2017-2018 CODESYS GmbH, Copyright (c) 1994-2016 3S-Smart Software Solutions GmbH. All rights reserved.

Macro Definition Documentation
------------------------------
.. _group___sys_pci_itf_1gaae6dcdb15b7d9fe060529c7d1a196bc5:

#define ITF_SysPci
^^^^^^^^^^^^^^^^^^

.. _group___sys_pci_itf_1gaca862454545f1190204e7594b1a5a06b:

#define EXTITF_SysPci
^^^^^^^^^^^^^^^^^^^^^

Typedef Documentation
---------------------

.. _group___sys_pci_itf_1ga6292de9be1cdd46fdcf89683eabac42c:

typedef struct tagsyspcigetcardinfo_struct  syspcigetcardinfo_struct
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

EXTERN LIB SECTION BEGIN

Get PCI info of a specified card. This function retrieves information on a PCI card that is identified by its vendor ID, its device ID and its card index. Therefore, SysPciGetCardInfo returns a pointer to a variable of type PCI_INFO containing the information on the PCI card.

**Returns:**

*RESULT: Returns the runtime system error code (see CmpErrors.library).

.. _group___sys_pci_itf_1ga9cb8f3151f93585bcf6296ec62e4be8b:

typedef struct tagsyspcigetconfigentry_struct  syspcigetconfigentry_struct
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Get one PCI config entry. This function allows to read the configuration data of a PCI card. The data is stored in a structure of type PCI_INFO and filled into the PCI bus. By means of the bus, device and function number SysPciGetConfigEntry identifies the associated bus entry and returns a pointer to it.

**Returns:**

*RESULT: Returns the runtime system error code (see CmpErrors.library).

.. _group___sys_pci_itf_1ga44d101393a4dd9fe548328b9720e5087:

typedef struct tagsyspcireadvalue_struct  syspcireadvalue_struct
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Read one PCI config value This function allows to read single configuration values of a PCI card by returning a pointer on the associated memory address (pbyData). Thereby the associated bus entry is identified via the bus, device and function number. The component to be read out is indicated by the PciOffset.

**Returns:**

*RESULT: Returns the runtime system error code (see CmpErrors.library).

.. _group___sys_pci_itf_1ga3e5c864c1733f2cb9a8f30436d10e930:

typedef struct tagsyspcisetconfigentry_struct  syspcisetconfigentry_struct
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Set one PCI config entry. This function allows to write an entry to the PCI bus. The entry is a structure of type PCI-INFO and is transmitted to the function SysPciSetConfigEntry via a pointer on it. The structure contains the configuration data of the PCI card being identified by the bus, device and function number.

**Returns:**

*RESULT: Returns the runtime system error code (see CmpErrors.library).

.. _group___sys_pci_itf_1ga03537fbab9fed237d6708e6abdcec786:

typedef struct tagsyspciwritevalue_struct  syspciwritevalue_struct
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Write one PCI config value This function allows to set single configuration values of a PCI card via a pointer on the corresponding memory address (pbyData). Therefore the bus entry associated to the PCI card is identified via the bus, device and function number. The bus entry is a structure of type PCI_INFO. The component to be read out is indicated by PciOffset.

**Returns:**

*RESULT: Returns the runtime system error code (see CmpErrors.library).

.. _group___sys_pci_itf_1gabc431428ede90a107db480999568fcdb:

typedef ISysPci_C ISysPci
^^^^^^^^^^^^^^^^^^^^^^^^^

Function Documentation
----------------------

.. _group___sys_pci_itf_1ga35199310ecb9821d041eb849e59190f4:

void syspcigetcardinfo (syspcigetcardinfo_struct *p)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. _group___sys_pci_itf_1gadc51899130bbf0325a8496abb6ee3856:

void syspcigetconfigentry (syspcigetconfigentry_struct *p)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. _group___sys_pci_itf_1ga91922372903a846c6ac440a09b5b3660:

void syspcireadvalue (syspcireadvalue_struct *p)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. _group___sys_pci_itf_1ga23050543550a249029f73e12bba89576:

void syspcisetconfigentry (syspcisetconfigentry_struct *p)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. _group___sys_pci_itf_1ga5a89d8898154a71120c9f20cdc440317:

void syspciwritevalue (syspciwritevalue_struct *p)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. _group___sys_pci_itf_1ga6f117919f89a847aa224db50a80a25d8:

RTS_RESULT SysPciOSInit (INIT_STRUCT *pInit)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

EXTERN LIB SECTION END

.. _group___sys_pci_itf_1ga4f1cadc5ba6a706e09fa19e005b60039:

RTS_RESULT SysPciOSHookFunction (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. _group___sys_pci_itf_1ga701df9befb17a2f027996fec4456e45a:

RTS_RESULT SysPciGetCardInfo (unsigned short usVendorId, unsigned short usDeviceId, unsigned short usCardIndex, PCI_INFO *pPciInfo)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Get PCI info of a specified card

**Parameters**

+---------+-------------+-------------------+
| [in]    | usVendorId  | PCI vendor number |
+---------+-------------+-------------------+
| [in]    | usDeviceId  | PCI device Id     |
+---------+-------------+-------------------+
| [in]    | usCardIndex | Card index number |
+---------+-------------+-------------------+
| [out]   | pPciInfo    | PCI entry         |
+---------+-------------+-------------------+

**Returns:**

error code

.. _group___sys_pci_itf_1ga9fb67b125d5734a51d082f31433d1215:

RTS_RESULT SysPciGetConfigEntry (unsigned short usBus, unsigned short usDevice, unsigned short usFunction, PCI_INFO *pPciInfo)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Get one PCI config entry

**Parameters**

+---------+------------+-----------------------------+
| [in]    | usBus      | PCI bus number (index)      |
+---------+------------+-----------------------------+
| [in]    | usDevice   | PCI device number (index)   |
+---------+------------+-----------------------------+
| [in]    | usFunction | PCI function number (index) |
+---------+------------+-----------------------------+
| [out]   | pPciInfo   | PCI entry                   |
+---------+------------+-----------------------------+

**Returns:**

error code

.. _group___sys_pci_itf_1gace0e47c9fa9d4b07b04cad155b687629:

RTS_RESULT SysPciSetConfigEntry (unsigned short usBus, unsigned short usDevice, unsigned short usFunction, PCI_INFO *pPciInfo)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Set one PCI config entry

**Parameters**

+---------+------------+-----------------------------+
| [in]    | usBus      | PCI bus number (index)      |
+---------+------------+-----------------------------+
| [in]    | usDevice   | PCI device number (index)   |
+---------+------------+-----------------------------+
| [in]    | usFunction | PCI function number (index) |
+---------+------------+-----------------------------+
| [in]    | pPciInfo   | PCI entry                   |
+---------+------------+-----------------------------+

**Returns:**

error code

.. _group___sys_pci_itf_1gada82541621c4fab66735cdb00e3720f3:

RTS_RESULT SysPciWriteValue (unsigned short usBus, unsigned short usDevice, unsigned short usFunction, unsigned short usPciOffset, unsigned char *pbyData, unsigned short usSize)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Write one PCI config value

**Parameters**

+---------+-------------+---------------------------------+
| [in]    | usBus       | PCI bus number (index)          |
+---------+-------------+---------------------------------+
| [in]    | usDevice    | PCI device number (index)       |
+---------+-------------+---------------------------------+
| [in]    | usFunction  | PCI function number (index)     |
+---------+-------------+---------------------------------+
| [in]    | usPciOffset | Offset in the PCI config entry  |
+---------+-------------+---------------------------------+
| [in]    | pbyData     | Pointer to data to write to PCI |
+---------+-------------+---------------------------------+
| [in]    | usSize      | Size in byte of data to write   |
+---------+-------------+---------------------------------+

**Returns:**

error code

.. _group___sys_pci_itf_1gae96b9d709b4d611fd56f2214e8de797f:

RTS_RESULT SysPciReadValue (unsigned short usBus, unsigned short usDevice, unsigned short usFunction, unsigned short usPciOffset, unsigned char *pbyData, unsigned short usSize)
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Read one PCI config value

**Parameters**

+---------+-------------+--------------------------------+
| [in]    | usBus       | PCI bus number (index)         |
+---------+-------------+--------------------------------+
| [in]    | usDevice    | PCI device number (index)      |
+---------+-------------+--------------------------------+
| [in]    | usFunction  | PCI function number (index)    |
+---------+-------------+--------------------------------+
| [in]    | usPciOffset | Offset in the PCI config entry |
+---------+-------------+--------------------------------+
| [out]   | pbyData     | Pointer to data to read to PCI |
+---------+-------------+--------------------------------+
| [in]    | usSize      | Size in byte of data to read   |
+---------+-------------+--------------------------------+

**Returns:**

error code

.. last line of group.rst template
.. last line of composition.rst template


