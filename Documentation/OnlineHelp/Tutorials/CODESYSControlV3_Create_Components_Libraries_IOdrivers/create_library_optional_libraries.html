

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Extend the Runtime System Component with an optional component &#8212; RuntimeSystemDocumentation V3.5.16.40</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/theme.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6.2.3.5. Create an I/O Driver in C" href="create_io_driver.html" />
    <link rel="prev" title="Extend the Runtime System Component" href="create_library_extend_runtime.html" /> 
  </head><body>
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="create_io_driver.html" title="6.2.3.5. Create an I/O Driver in C"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="create_library_extend_runtime.html" title="Extend the Runtime System Component"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >6. Tutorials / HowTos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >6.2.3. Creating Runtime System Components, Libraries and I/O Drivers</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="create_library.html" accesskey="U">6.2.3.4. Create a CODESYS library with external functions</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="create_library_extend_runtime.html"
                        title="previous chapter">Extend the Runtime System Component</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="create_io_driver.html"
                        title="next chapter">6.2.3.5. Create an I/O Driver in C</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="extend-the-runtime-system-component-with-an-optional-component">
<span id="create-library-optional-libraries"></span><h1>Extend the Runtime System Component with an optional component<a class="headerlink" href="#extend-the-runtime-system-component-with-an-optional-component" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id8">Introduction</a></p></li>
<li><p><a class="reference internal" href="#structure-of-an-optional-external-interface" id="id9">Structure of an optional external interface</a></p></li>
<li><p><a class="reference internal" href="#creation-of-a-new-external-interface" id="id10">Creation of a new external interface</a></p></li>
<li><p><a class="reference internal" href="#conversion-of-an-existing-external-interface-into-an-optional-external-interface" id="id11">Conversion of an existing external interface into an optional external interface</a></p></li>
<li><p><a class="reference internal" href="#final-check" id="id12">Final check</a></p></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id8">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Optional external libraries serve to make optional runtime system components available in IEC. Optional means here that a component cannot be integrated
in any runtime system because of resource or system restrictions. So optional components and their corresponding libraries are not available
in all runtime systems.</p>
<p>To make a library in CODESYS optional, it is necessary to separate data types, interfaces, constants, etc. from the actual implementation.
This separation is necessary because it is not possible to use a conditional compilation in the declaration part of CODESYS. By splitting the
implementation and the data types, it is possible that the data types are used in the declaration part, but are conditionally translated against
the external interface in the implementation part. This enables the IEC programmer (library developer) to react to optional external interfaces.</p>
<p>The following example illustrates the use of an optional interface.</p>
<div class="highlight-codesys notranslate"><div class="highlight"><pre><span></span>{IF defined (pou:EventOpen)}
       EventOpen();
{END_IF}
</pre></div>
</div>
</div>
<div class="section" id="structure-of-an-optional-external-interface">
<h2><a class="toc-backref" href="#id9">Structure of an optional external interface</a><a class="headerlink" href="#structure-of-an-optional-external-interface" title="Permalink to this headline">¶</a></h2>
<p>The structure of an optional external interface is essentially always the same. However, the structure differs in detail depending on whether a
new runtime component is developed or whether an existing external interface is converted to optional. This has to do with the existing placeholders
in the device description and compatibility. The first step describes the basic structure. In the following chapters, you will find instructions on
how to convert a new optional external interface and how to convert an existing external interface to optional. The aim of both procedures is that
the external interface is represented in CODESYS as follows:</p>
<img alt="../../_images/create_library_optional_libraries_image1.png" src="../../_images/create_library_optional_libraries_image1.png" />
<ul>
<li><p>Container library &lt;name&gt;.library:
This library combines the interface library and the implementation library for the user. The user only has to include this one library in his project / library.
Two further libraries are then integrated in this container:</p>
<ul>
<li><p>Interface Library &lt;Name&gt;_Itfs.library</p>
<p>Contains all public declarations (constants, structures, enums, unions, IEC interfaces, etc.)</p>
</li>
<li><p>Implementation Library &lt;Name&gt;_Impl.library</p>
<p>Contains the implementation (typically the external functions or FBs) This library is always referenced by placeholders.
If the implementation is not available on the PLC, this library is resolved to NotImplementedByDevice</p>
</li>
</ul>
</li>
</ul>
<p>Now the container library can be included in IEC and the interface library is always available for the declaration part of the project.
In the implementation part you can now compile conditionally against the implementation library and the code is removed at compile time
if the implementation is not available and this library is resolved to NotImplementedByDevice.</p>
</div>
<div class="section" id="creation-of-a-new-external-interface">
<h2><a class="toc-backref" href="#id10">Creation of a new external interface</a><a class="headerlink" href="#creation-of-a-new-external-interface" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The procedure described here does not create a placeholder for the container library. This is the correct procedure for new external interfaces.
The procedure is not suitable for converting existing libraries.</p>
</div>
<div class="section" id="step-1-create-interface-library">
<h3>Step 1: Create Interface Library<a class="headerlink" href="#step-1-create-interface-library" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>1.1 Create the library over the whole normal template. Name &lt;ComponentName&gt;_Itfs.library</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image2.png" src="../../_images/create_library_optional_libraries_image2.png" />
</div></blockquote>
<p>1.2 Fill the interface library with all required types etc.</p>
<p>1.3 In Libman add other needed interface libraries. In an interface library only other interface libraries can be added.</p>
<p>1.4 Set the following settings in the Project Information:</p>
<blockquote>
<div><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="../../_images/create_library_optional_libraries_image3.png" src="../../_images/create_library_optional_libraries_image3.png" />
</td>
<td><img alt="../../_images/create_library_optional_libraries_image4.png" src="../../_images/create_library_optional_libraries_image4.png" />
</td>
</tr>
</tbody>
</table>
<p>The following properties must be filled here:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 71%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Company</p></td>
<td><p>System</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-odd"><td><p>Title</p></td>
<td><p>&lt;ComponentName&gt; Interface</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-even"><td><p>Version</p></td>
<td><p>Current development version</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-odd"><td><p>LibraryCategories</p></td>
<td><p>System|SysLibs</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Insert the documentation here.
Tip: Edit in an external text editor and then insert</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-odd"><td><p>IsInterfaceLibrary</p></td>
<td><p>Must be set to True</p></td>
<td><p>Boolean</p></td>
</tr>
<tr class="row-even"><td><p>DocFormat</p></td>
<td><p>reStructuredText format, if documentation is realized in rst</p></td>
<td><p>Text</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>1.5 Install library</p>
<p>1.6 Add library to your sourcecode management system</p>
<p>1.7 Perform an M4 export of the library into the component interface of the runtime component</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image5.png" src="../../_images/create_library_optional_libraries_image5.png" />
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="step-2-create-implementation-library">
<h3>Step 2: Create implementation library<a class="headerlink" href="#step-2-create-implementation-library" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>2.1 Create the library using the appropriate template. Name &lt;ComponentName&gt;_Impl.library</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image6.png" src="../../_images/create_library_optional_libraries_image6.png" />
</div></blockquote>
<p>2.2 Add the external or other implementation</p>
<p>2.3 Set the following settings in the Project Information:</p>
<blockquote>
<div><table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><img alt="../../_images/create_library_optional_libraries_image7.png" src="../../_images/create_library_optional_libraries_image7.png" />
</td>
<td><img alt="../../_images/create_library_optional_libraries_image8.png" src="../../_images/create_library_optional_libraries_image8.png" />
</td>
</tr>
</tbody>
</table>
<p>The following properties must be filled here:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 72%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
<th class="head"><p>Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Company</p></td>
<td><p>System</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-odd"><td><p>Title</p></td>
<td><p>&lt;ComponentName&gt; Implementation</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-even"><td><p>Version</p></td>
<td><p>Current development version</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-odd"><td><p>LibraryCategories</p></td>
<td><p>System|SysLibs</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Insert the documentation here.
Tip: Edit in an external text editor and then insert</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-odd"><td><p>Placeholder</p></td>
<td><p>The placeholder for the library must be set here.
For the implementation &lt;ComponentName&gt; Implementation is used</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-even"><td><p>DefaultNamespace</p></td>
<td><p>This is usually empty for external interfaces</p></td>
<td><p>Text</p></td>
</tr>
<tr class="row-odd"><td><p>DocFormat</p></td>
<td><p>reStructuredText format, if documentation is realized in rst</p></td>
<td><p>Text</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>2.4 Add the interface library and other required libraries to LibMan</p>
<p>2.5 Install the library.</p>
<p>2.6 Add library to your sourcecode management system</p>
<p>2.7 Perform an M4 export of the library to a new runtime interface named &lt;ComponentName&gt;_ImplementationItf.m4</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image9.png" src="../../_images/create_library_optional_libraries_image9.png" />
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="step-3-create-container-library">
<h3>Step 3: Create container library<a class="headerlink" href="#step-3-create-container-library" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>3.1 Create the library using the appropriate template. Name &lt;ComponentName&gt;.library</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image10.png" src="../../_images/create_library_optional_libraries_image10.png" />
</div></blockquote>
<dl>
<dt>3.2 Add the two previously created libraries to the Libman. Make sure that the &lt;ComponentName&gt; implementation is inserted by placeholder.</dt><dd><p>This is the case when the library is inserted as follows : &lt;Placeholder&gt; = &lt;ComponentName&gt; Implementation</p>
<img alt="../../_images/create_library_optional_libraries_image11.png" src="../../_images/create_library_optional_libraries_image11.png" />
</dd>
</dl>
<p>3.3 In the libman for both inserted libraries set that the symbols should be available directly in the container library.</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image12.png" src="../../_images/create_library_optional_libraries_image12.png" />
</div></blockquote>
<p>3.4 Set the following settings in the Project Information:</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image13.png" src="../../_images/create_library_optional_libraries_image13.png" />
<p>Company: System</p>
<p>Title: &lt;ComponentName&gt;</p>
<p>Version: Current development version</p>
<p>LibraryCategories: System|SysLibs</p>
<p>Description: Insert the documentation here. Tip: Edit in an external text editor and then insert.</p>
</div></blockquote>
<p>3.5 Install the library.</p>
<p>3.6 Add library to your sourcecode management system</p>
</div></blockquote>
</div>
<div class="section" id="step-4-update-placeholders-for-the-device-description">
<h3>Step 4: Update placeholders for the device description<a class="headerlink" href="#step-4-update-placeholders-for-the-device-description" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl>
<dt>4.1 In the Placeholder.xml set the default resolution</dt><dd><p>of the library to NotImplementedByDevice, 3.5.15.0 (System).
This is an empty library. It is always used in exactly this version. The idea behind this is that in the libman you can see why the library
is not resolved to the implementation. Therefore we have chosen the name NotImplementedByDevice:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;Placeholders</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.3s-software.com/schemas/Placeholders-0.1.xsd&quot;</span> <span class="na">version=</span><span class="s">&quot;3.5.16.0&quot;</span> <span class="na">xmlns:ts=</span><span class="s">&quot;http://www.3s-software.com/schemas/TargetSettings-0.1.xsd&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;ts:section</span> <span class="na">name=</span><span class="s">&quot;library-management&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ts:section</span> <span class="na">name=</span><span class="s">&quot;placeholder-libraries&quot;</span><span class="nt">&gt;</span>
      ...
      <span class="c">&lt;!-- *********************************  optional Runtime components **********************************************--&gt;</span>
      ...
      <span class="nt">&lt;ts:setting</span> <span class="na">name=</span><span class="s">&quot;MyExternalExample Implementation&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">access=</span><span class="s">&quot;visible&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ts:value&gt;</span>NotImplementedByDevice, 3.5.15.0 (System)<span class="nt">&lt;/ts:value&gt;</span>
      <span class="nt">&lt;/ts:setting&gt;</span>
    <span class="nt">&lt;/ts:section&gt;</span>
  <span class="nt">&lt;/ts:section&gt;</span>
<span class="nt">&lt;/Placeholders&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<p>4.2 In the OptionalRuntimeLibraries.xml set the correct resolution of the library to &lt;ComponentName&gt; Implementation</p>
<blockquote>
<div><div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;Placeholders</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.3s-software.com/schemas/Placeholders-0.1.xsd&quot;</span> <span class="na">version=</span><span class="s">&quot;3.5.15.0&quot;</span> <span class="na">xmlns:ts=</span><span class="s">&quot;http://www.3s-software.com/schemas/TargetSettings-0.1.xsd&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!-- This file contains only completely optional external libraries.</span>
<span class="c">       These libraries MUST NOT contain any types. If the library contains types split it up into an</span>
<span class="c">       interface and implementation library. These two libraries are combined into a container library. --&gt;</span>
  <span class="nt">&lt;ts:section</span> <span class="na">name=</span><span class="s">&quot;library-management&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;ts:section</span> <span class="na">name=</span><span class="s">&quot;placeholder-libraries&quot;</span><span class="nt">&gt;</span>
      <span class="c">&lt;!-- **********************************************  3S Placeholder  ***************************************************** --&gt;</span>
        ...
      <span class="nt">&lt;ts:setting</span> <span class="na">name=</span><span class="s">&quot;MyExternalExample Implementation&quot;</span> <span class="na">type=</span><span class="s">&quot;string&quot;</span> <span class="na">access=</span><span class="s">&quot;visible&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ts:value&gt;</span>CmpCharDevice Implementation, 3.5.15.10 (3S - Smart Software Solutions GmbH)<span class="nt">&lt;/ts:value&gt;</span>
      <span class="nt">&lt;/ts:setting&gt;</span>
    <span class="nt">&lt;/ts:section&gt;</span>
  <span class="nt">&lt;/ts:section&gt;</span>
<span class="nt">&lt;/Placeholders&gt;</span>
</pre></div>
</div>
<p>4.3 Two macros are exported with the m4 export of the external implementation library:</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span>SET_INTERFACE_NAME(`&lt;ComponentName&gt;_Implementation&#39;)
SET_PLACEHOLDER_NAME(`&lt;ComponentName&gt; Implementation&#39;)
</pre></div>
</div>
<p>These are used by the Delivery Manager to create the placeholder list in the device description:
NotImplementedByDevice -&gt; &lt;ComponentName&gt; Implementation</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a CODESYS version &lt; 3.5.16.0 is used to export the m4 files, the two above defines must be inserted manually into the
&lt;ComponentName&gt;_ImplementationItf.m4 file!</p>
</div>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="step-5-changes-to-the-runtime-component">
<h3>Step 5: Changes to the runtime component<a class="headerlink" href="#step-5-changes-to-the-runtime-component" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>5.1 There is now a new &lt;ComponentName&gt;_ImplementationItf.m4 for the external interface This must be compiled with the M4 compiler.</p>
<p>5.2 In Dependency-M4 of the component &lt;ComponentName&gt;Dep.m4, this new interface must also be implemented to make the external interface available.</p>
<p>5.3 Implement the external interface in the runtime component.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="conversion-of-an-existing-external-interface-into-an-optional-external-interface">
<h2><a class="toc-backref" href="#id11">Conversion of an existing external interface into an optional external interface</a><a class="headerlink" href="#conversion-of-an-existing-external-interface-into-an-optional-external-interface" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an existing external library is converted into an optional external interface, it is necessary to use the old placeholder for the
“Container Library”. If this is not the case, the compatibility between a converted library and the old unmodified library is not guaranteed.
Therefore, different steps are necessary in this case.</p>
</div>
</div></blockquote>
<div class="section" id="id1">
<h3>Step 1: Create Interface Library<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The same steps are necessary as for a new external interface. In step 2, the data types Interfaces and so on are moved from the existing external library
to this new library.</p>
</div></blockquote>
</div>
<div class="section" id="id2">
<h3>Step 2: Create implementation library<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The same steps are required as for a new external interface. In step 2 the external interfaces, FBs or programs are moved from the existing external library
to this new library.</p>
</div></blockquote>
</div>
<div class="section" id="id3">
<h3>Step 3: Create container library<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>3.1 Open the existing external library &lt;ComponentName&gt;.library</p>
<p>3.2 After the other two libraries are created, the existing external library should be essentially empty. If this is not the case, parts still have to be moved to one of the other two libraries.</p>
<p>3.3 Delete all libraries in Libman.</p>
<p>3.4 Add the two newly created libraries in the Libman. Again, make sure that the &lt;ComponentName&gt; implementation is inserted using placeholders. Also check the box as for the real container lib. See step 3 for the new container library.</p>
<p>3.5 Insert a new attribute in the project settings</p>
<blockquote>
<div><p>IsCommonLibraryContainer: True. This attribute causes this library to receive the same checks as a real container library. This ensures that
the library is used correctly.</p>
<img alt="../../_images/create_library_optional_libraries_image14.png" src="../../_images/create_library_optional_libraries_image14.png" />
</div></blockquote>
<p>3.6 Install the modified library</p>
<p>3.7 Commit the changed library in your sourcecode management system</p>
</div></blockquote>
</div>
<div class="section" id="step-4-updating-the-device-description-and-the-runtime-component">
<h3>Step 4: Updating the device description and the runtime component<a class="headerlink" href="#step-4-updating-the-device-description-and-the-runtime-component" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>These steps correspond to the steps for a new external interface. However, you must ensure that the old placeholder is retained.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="final-check">
<h2><a class="toc-backref" href="#id12">Final check</a><a class="headerlink" href="#final-check" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>To see if everything worked correctly, the following things must be installed in CODESYS:</p>
<ul class="simple">
<li><p>All new libraries</p></li>
<li><p>The newly generated device description</p></li>
</ul>
<p>These screenshots have been made with existing libraries.</p>
</div></blockquote>
<div class="section" id="behavior-with-new-external-interfaces">
<h3>Behavior with new external interfaces<a class="headerlink" href="#behavior-with-new-external-interfaces" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>These two libraries were initially implemented as optional external interfaces.</p>
<blockquote>
<div><ul class="simple">
<li><p>CmpOPCUAClient not available on the runtime</p></li>
<li><p>CmpOPCUAStack available on the Runtime</p></li>
</ul>
</div></blockquote>
<img alt="../../_images/create_library_optional_libraries_image15.png" src="../../_images/create_library_optional_libraries_image15.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pay attention to the following things:</p>
<ul class="simple">
<li><p>The container library is not resolved using a placeholder</p></li>
<li><p>The interface library is always used in the latest version <a href="#id4"><span class="problematic" id="id5">*</span></a>(System)</p></li>
<li><p>The implementation library is resolved in the correct version or as NotImplementedByDevice</p></li>
</ul>
</div>
</div></blockquote>
</div>
<div class="section" id="behavior-when-converting-an-existing-library">
<h3>Behavior when converting an existing library<a class="headerlink" href="#behavior-when-converting-an-existing-library" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The behaviour is illustrated here using SysSocket</p>
<p>Library before reconstruction:</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image16.png" src="../../_images/create_library_optional_libraries_image16.png" />
</div></blockquote>
<p>Library after reconstruction:</p>
<blockquote>
<div><img alt="../../_images/create_library_optional_libraries_image17.png" src="../../_images/create_library_optional_libraries_image17.png" />
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pay attention to the following things:</p>
<ul class="simple">
<li><p>The container library is expanded using a placeholder</p></li>
<li><p>The interface library is always used in the latest version <a href="#id6"><span class="problematic" id="id7">*</span></a>(System)</p></li>
<li><p>The implementation library is resolved in the correct version or as NotImplementedByDevice</p></li>
<li><p>When updating a Device to the old version, these libraries disappear and the old non-divided library is attracted again</p></li>
</ul>
</div>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="create_io_driver.html" title="6.2.3.5. Create an I/O Driver in C"
             >next</a> |</li>
        <li class="right" >
          <a href="create_library_extend_runtime.html" title="Extend the Runtime System Component"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >6. Tutorials / HowTos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >6.2.3. Creating Runtime System Components, Libraries and I/O Drivers</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="create_library.html" >6.2.3.4. Create a CODESYS library with external functions</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, 3S-Smart Software Solutions GmbH. This document is confidential. Unauthorized copying, disclosure or distribution of this document and the information contained herein is strictly forbidden.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>