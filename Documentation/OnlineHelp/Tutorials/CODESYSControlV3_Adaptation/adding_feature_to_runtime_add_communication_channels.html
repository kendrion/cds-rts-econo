

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Add Communication Channels &#8212; RuntimeSystemDocumentation V3.5.16.40</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/theme.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Add other Features" href="adding_feature_to_runtime_add_other_features.html" />
    <link rel="prev" title="Change the Scheduler" href="adding_feature_to_runtime_change_scheduler.html" /> 
  </head><body>
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="adding_feature_to_runtime_add_other_features.html" title="Add other Features"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="adding_feature_to_runtime_change_scheduler.html" title="Change the Scheduler"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >6. Tutorials / HowTos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >6.2.2. CODESYS Control V3 - Porting to a new platform</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="adding_feature_to_runtime.html" accesskey="U">6.2.2.3. Adding Features to the Runtime</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="adding_feature_to_runtime_change_scheduler.html"
                        title="previous chapter">Change the Scheduler</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="adding_feature_to_runtime_add_other_features.html"
                        title="next chapter">Add other Features</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="add-communication-channels">
<span id="adding-feature-to-runtime-add-communication-channels"></span><h1>Add Communication Channels<a class="headerlink" href="#add-communication-channels" title="Permalink to this headline">¶</a></h1>
<div class="section" id="serial">
<h2>Serial<a class="headerlink" href="#serial" title="Permalink to this headline">¶</a></h2>
<p>The serial block driver is the default one, which we support with our
compact runtime. So you might already use this as a communication
method.</p>
</div>
<div class="section" id="udp">
<h2>UDP<a class="headerlink" href="#udp" title="Permalink to this headline">¶</a></h2>
<p>Additional Components:</p>
<ul class="simple">
<li><p>CmpBlkDrvUdp</p></li>
</ul>
<p>Dependencies:</p>
<ul class="simple">
<li><p>SysSocket</p></li>
</ul>
<p>The SysSocket interface is based on the BSD socket interface and awaits
a similar behaviour. The API is very big. That’s why it isn’t described
here in detail. Instead here are the most essential functions, which are
used from our Communication Interface (CmpBlkDrvUdp):</p>
<ul class="simple">
<li><p>SysSockSelect</p></li>
<li><p>SysSockGetOption</p></li>
<li><p>SysSockCreate</p></li>
<li><p>SysSockClose</p></li>
<li><p>SysSockSetOption</p></li>
<li><p>SysSockBind</p></li>
<li><p>SysSockGetHostName</p></li>
<li><p>SysSockGetHostByName</p></li>
<li><p>SysSockNtohl</p></li>
<li><p>SysSockHtonl</p></li>
<li><p>SysSockNtohs</p></li>
<li><p>SysSockHtons</p></li>
<li><p>SysSockSendTo</p></li>
<li><p>SysSockRecvFrom</p></li>
<li><p>SysSockIoctl</p></li>
<li><p>SysSockInetNtoa</p></li>
<li><p>SysSockInetAddr</p></li>
<li><p>SysSockGetOSHandle</p></li>
</ul>
</div>
<div class="section" id="can">
<h2>CAN<a class="headerlink" href="#can" title="Permalink to this headline">¶</a></h2>
<p>Additional Components:</p>
<ul class="simple">
<li><p>CmpBlkDrvCanClient</p></li>
<li><p>CmpBlkDrvCanServer</p></li>
</ul>
<p>Dependencies:</p>
<ul class="simple">
<li><p>CmpCAACanL2</p></li>
<li><p>CmpCAAMemBlockMan</p></li>
<li><p>CmpCAASdoClient</p></li>
<li><p>CmpCAASdoServer</p></li>
<li><p>CmpCAATick</p></li>
<li><p>CmpCAATickUtil</p></li>
</ul>
<p>Required:</p>
<ul class="simple">
<li><p>CAN-Mini-Driver</p></li>
</ul>
<p>For a basic CAN-Mini-Driver, you just need to implement the following
functionality:</p>
<ul>
<li><div class="line-block">
<div class="line">Initialization:</div>
<div class="line">Call CL2_CmdRegister() with a list of all CAN Layer 2 Interface
functions.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">CMD_Init():</div>
<div class="line">Setup your chip in this function.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">CMD_Send():</div>
<div class="line">Send Data to the bus. The control about the buffer is given back to
CL2 with CL2_MsgSendAckn() within your send interrupt.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">CMD_Receive():</div>
<div class="line">Read a message from the bus and write it into the passed message
handle. The regular use of this function will be asynchronous, when
you call it by your own within the <strong>receive interrupt</strong>:</div>
<div class="line">CL2_MsgAlloc()</div>
<div class="line">CMD_Receive()</div>
<div class="line">CL2_MsgPutRQueue()</div>
</div>
</li>
</ul>
</div>
<div class="section" id="usb">
<h2>USB<a class="headerlink" href="#usb" title="Permalink to this headline">¶</a></h2>
<p>Additional Components:</p>
<ul class="simple">
<li><p>CmpBlkDrvUsb</p></li>
</ul>
<p>Required:</p>
<ul class="simple">
<li><p>USB-Mini-Driver</p></li>
</ul>
<p>The USB-Mini-Driver needs to provide the following API:</p>
<ul>
<li><div class="line-block">
<div class="line">OpenDevice()</div>
<div class="line">Search for a specific device, with VendorID and DeviceID and open
it.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Read()</div>
<div class="line">Read in Bulk mode from an opened USB device.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">Write()</div>
<div class="line">Write in Bulk mode to an opened USB device.</div>
</div>
</li>
<li><div class="line-block">
<div class="line">CloseDevice()</div>
<div class="line">Close the connection to an opened USB device.</div>
</div>
</li>
</ul>
</div>
<div class="section" id="shm">
<h2>SHM<a class="headerlink" href="#shm" title="Permalink to this headline">¶</a></h2>
<p>Additional Components:</p>
<ul class="simple">
<li><p>CmpBlkDrvShm</p></li>
</ul>
<p>Dependencies:</p>
<ul class="simple">
<li><p>SysEvent</p></li>
<li><p>SysSemProcess</p></li>
<li><p>SysShm</p></li>
</ul>
<p>This block driver can be used, if you have two different processes
running on the same processor, which should communicate with each other.
Note, that you need some support for global, named Events, Semaphores
and Shared Memory segments. Those mechanisms might be already provided
from your operating system. If not, you have provide it by your own.</p>
<p>For example:</p>
<p>If an Event, called “myevent” is created two times from two different
processes, the first one will create the event in the context of the
operating system and the second one will just retrieve the already
created event.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="adding_feature_to_runtime_add_other_features.html" title="Add other Features"
             >next</a> |</li>
        <li class="right" >
          <a href="adding_feature_to_runtime_change_scheduler.html" title="Change the Scheduler"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >6. Tutorials / HowTos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >6.2.2. CODESYS Control V3 - Porting to a new platform</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="adding_feature_to_runtime.html" >6.2.2.3. Adding Features to the Runtime</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, 3S-Smart Software Solutions GmbH. This document is confidential. Unauthorized copying, disclosure or distribution of this document and the information contained herein is strictly forbidden.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>