

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>7.2.2.12. Supervisor &#8212; RuntimeSystemDocumentation V3.5.16.40</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/theme.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="7.2.2.13. SysReadWriteLock Support" href="SysReadWriteLock.html" />
    <link rel="prev" title="7.2.2.11. SPI" href="SPI.html" /> 
  </head><body>
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="SysReadWriteLock.html" title="7.2.2.13. SysReadWriteLock Support"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="SPI.html" title="7.2.2.11. SPI"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../reference.html" >7. Reference Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >7.2. Features</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index___p_l_c___features.html" accesskey="U">7.2.2. PLC Features</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="SPI.html"
                        title="previous chapter">7.2.2.11. SPI</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="SysReadWriteLock.html"
                        title="next chapter">7.2.2.13. SysReadWriteLock Support</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="supervisor">
<span id="feature-supervisor"></span><h1>7.2.2.12. Supervisor<a class="headerlink" href="#supervisor" title="Permalink to this headline">¶</a></h1>
<p>This feature provides a generic and easy way to supervise all vital operations of the runtime system!
It can be used for example to retrigger a hardware watchdog to detect a failure in vital operations which cannot be handled in software.</p>
<p>The interface of the supervisor can be used to:</p>
<ul class="simple">
<li><p>Interfaces to read the global state of all vital operations and to iterate over all vital operations</p></li>
<li><p>Register/unregister an additional vital operation for supervision</p></li>
<li><p>Retrigger a vital operation to be alive</p></li>
<li><p>There is an explicit dead signal for desperate situations such as memory overwrite, etc. For these operations stTimeoutUs should be set to 0 to disable time check</p></li>
</ul>
<div class="section" id="vital-operations">
<h2>Vital Operations<a class="headerlink" href="#vital-operations" title="Permalink to this headline">¶</a></h2>
<p>The following vital operations are supervised:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 10%" />
<col style="width: 27%" />
<col style="width: 29%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ComponentID</p></th>
<th class="head"><p>OperationID</p></th>
<th class="head"><p>Reference</p></th>
<th class="head"><p>Timeout [us]</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CMPID_Scheduler</p></td>
<td><p>1</p></td>
<td><p><a class="reference internal" href="../Reference/group___cmp_schedule_itf___operation_i_d.html#group-cmp-schedule-itf-operation-i-d"><span class="std std-ref">OperationID</span></a></p></td>
<td><p>2 * scheduler tick interval
[Default = 2 * 1000] us</p>
<dl class="simple">
<dt>(scheduler interval is specified by the setting</dt><dd><p>SCHEDULEKEY_INT_SCHEDULER_INTERVAL_US)</p>
</dd>
</dl>
</td>
<td><p>Schedule tick is supervised CmpMemGC</p></td>
</tr>
<tr class="row-odd"><td><p>CMPID_Scheduler</p></td>
<td><p>2</p></td>
<td><p><a class="reference internal" href="../Reference/group___cmp_schedule_itf___operation_i_d.html#group-cmp-schedule-itf-operation-i-d"><span class="std std-ref">OperationID</span></a></p></td>
<td><p>Is calculated based on the lowest watchdog interval
from all IEC tasks!</p></td>
<td><p>[OPTIONAL]
Only used, if scheduler is operating in
SVM_WATCHDOG_TIMER mode!</p></td>
</tr>
<tr class="row-even"><td><p>CMPID_CmpApp</p></td>
<td><p>[Application ID]</p></td>
<td><p><a class="reference internal" href="../Reference/group___cmp_app_itf___operation_i_d.html#group-cmp-app-itf-operation-i-d"><span class="std std-ref">OperationID</span></a></p></td>
<td><p>MIN(10.000.000, MAX(2 * maxinterval of all IEC tasks)</p></td>
<td><p>Is active for RUN/STOP at:</p>
<ul class="simple">
<li><p>User stop</p></li>
<li><p>Reset</p></li>
<li><p>Exception</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>CMPID_CmpIecTask</p></td>
<td><p>1</p></td>
<td><p><a class="reference internal" href="../Reference/group___cmp_iec_task_itf___operation_i_d.html#group-cmp-iec-task-itf-operation-i-d"><span class="std std-ref">OperationID</span></a></p></td>
<td><p>[Default = 10000] us</p>
<p>(see setting IECTASKKEY_INT_WAIT_FOR_STOP_TIMEOUT</p>
</td>
<td><p>Supervision of a watchdog error during
IO-update (IEC task must leave IO update)</p></td>
</tr>
<tr class="row-even"><td><p>CMPID_CmpSupervisor</p></td>
<td><p>1</p></td>
<td><p><a class="reference internal" href="../Reference/group___cmp_supervisor_itf___operation_i_d.html#group-cmp-supervisor-itf-operation-i-d"><span class="std std-ref">OperationID</span></a></p></td>
<td><p>60.000.000</p></td>
<td><p>Detects if there is no idle call
within a configurable interval.</p></td>
</tr>
<tr class="row-odd"><td><p>CMPID_CmpMemGC</p></td>
<td><p>1</p></td>
<td><p><a class="reference internal" href="../Reference/group___cmp_mem_g_c_itf___operation_i_d.html#group-cmp-mem-g-c-itf-operation-i-d"><span class="std std-ref">OperationID</span></a></p></td>
<td><p>0</p></td>
<td><p>Detects memory corruption / overwrites in
CmpMemGC</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="use-case-hardware-watchdog">
<h2>Use case: Hardware watchdog<a class="headerlink" href="#use-case-hardware-watchdog" title="Permalink to this headline">¶</a></h2>
<p>The supervisor can be used for higher level surveillance like a hardware watchdog or a separate supervisor process!</p>
<p>To realize this, a cyclic task or timer has to call SupervisorOperationGetState() periodically and retrigger the hardware watchdog. In case the nNumOfFailedOperations is greater than 0,
the cyclic task have to:</p>
<ul class="simple">
<li><p>prevent retriggering the hardware watchdog to expire -&gt; system reboot</p></li>
<li><p>check the causing operation and in case it is unimportant in this system state, give a second chance by reactivating the operation.
Call SupervisorOperationDisable() followed by SupervisorOperationEnable() to reactivate the supervision of the operation</p></li>
</ul>
<p>You can iterate through all vital operations by SupervisorOperationGetFirst() and SupervisorOperationGetNext(). With SupervisorOperationGetEntry() you can get details of the operation.</p>
<div class="section" id="required-features">
<h3>Required features<a class="headerlink" href="#required-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="Runtime.html#feature-runtime"><span class="std std-ref">Base runtime feature</span></a></p></li>
</ul>
</div>
<div class="section" id="required-target-settings">
<h3>Required target settings<a class="headerlink" href="#required-target-settings" title="Permalink to this headline">¶</a></h3>
<p>The following target settings are necessary for this feature:</p>
<ul class="simple">
<li><p><span class="xref std std-ref">library-management_placeholder-libraries_CmpSupervisor</span></p></li>
</ul>
</div>
<div class="section" id="required-components">
<h3>Required components<a class="headerlink" href="#required-components" title="Permalink to this headline">¶</a></h3>
<p>The following runtime system components are necessary for this feature:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../Reference/group___cmp_supervisor_dep.html#group-cmp-supervisor-dep"><span class="std std-ref">CmpSupervisor</span></a></p></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="SysReadWriteLock.html" title="7.2.2.13. SysReadWriteLock Support"
             >next</a> |</li>
        <li class="right" >
          <a href="SPI.html" title="7.2.2.11. SPI"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../reference.html" >7. Reference Documentation</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >7.2. Features</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index___p_l_c___features.html" >7.2.2. PLC Features</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, 3S-Smart Software Solutions GmbH. This document is confidential. Unauthorized copying, disclosure or distribution of this document and the information contained herein is strictly forbidden.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>