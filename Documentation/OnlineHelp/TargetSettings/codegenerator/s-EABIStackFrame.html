
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>6.2.29. EABIStackFrame &#8212; RuntimeSystemOnlineHelp V3.5.14.0</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.5.14.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="top" title="RuntimeSystemOnlineHelp V3.5.14.0" href="../../index.html" />
    <link rel="up" title="6.2. codegenerator" href="category.html" />
    <link rel="next" title="6.2.30. embedded-floating-point-unit" href="s-embedded-floating-point-unit.html" />
    <link rel="prev" title="6.2.28. double-precision-floating-point-apu" href="s-double-precision-floating-point-apu.html" /> 
  </head>
  <body role="document">
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="s-embedded-floating-point-unit.html" title="6.2.30. embedded-floating-point-unit"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="s-double-precision-floating-point-apu.html" title="6.2.28. double-precision-floating-point-apu"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">RuntimeSystemOnlineHelp V3.5.14.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >6. TargetSettingsDoc (3.5.15.0)</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="category.html" accesskey="U">6.2. codegenerator</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="s-double-precision-floating-point-apu.html"
                        title="previous chapter">6.2.28. double-precision-floating-point-apu</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="s-embedded-floating-point-unit.html"
                        title="next chapter">6.2.30. embedded-floating-point-unit</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/TargetSettings/codegenerator/s-EABIStackFrame.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="eabistackframe">
<span id="codegenerator-eabistackframe"></span><span id="index-0"></span><h1>6.2.29. EABIStackFrame<a class="headerlink" href="#eabistackframe" title="Permalink to this headline">Â¶</a></h1>
<p><strong>Name:</strong> codegenerator\EABIStackFrame</p>
<p><strong>Default Value:</strong> False</p>
<p><strong>Recommended Value:</strong> False</p>
<p><strong>XML Type:</strong> boolean</p>
<p><strong>dotNet Type:</strong> System.Boolean</p>
<p><strong>Example:</strong></p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;ts:section</span> <span class="na">name=</span><span class="s">&quot;codegenerator&quot;</span><span class="nt">&gt;</span>
      ...
    <span class="nt">&lt;ts:setting</span> <span class="na">name=</span><span class="s">&quot;EABIStackFrame&quot;</span> <span class="na">type=</span><span class="s">&quot;boolean&quot;</span> <span class="na">access=</span><span class="s">&quot;visible&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;ts:value&gt;</span>0<span class="nt">&lt;/ts:value&gt;</span>
    <span class="nt">&lt;/ts:setting&gt;</span>
      ...
<span class="nt">&lt;/ts:section&gt;</span>
</pre></div>
</div>
<p><strong>Documentation:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>PowerPC code generation:
                Attention:
                The stack frame of the CODESYS PowerPC and PowerPC VLE codegenerator changed in a way that it is now according to Embedded
                Application Binary Interface (EABI) and thus the same in CODESYS application context and in C context. This requires an
                adaptation of the runtime system layer, which implicitly relies on the stack frame of the CODESYS application.

                Following functions of SysCpuHandlingOS.c must be adapted:

                -SysCpuGetInstancePointer()
                This function is used to get the instance pointer, which is placed on the stack by the CODESYS application relatively to the base pointer.The relative offset of the instance pointer to the base pointer changed from 16 byte to 8 byte.

                - SysCpuGetCallstackEntry2():
                To roll back the call stack in case of an exception or a breakpoint in the CODESYS IDE, this function gets the necessary information like the return address and the previous base pointer, by using the current base pointer.
                As the stack frame of CODESYS application context and the C context is usually different, there is an differentiation between those contexts. This is not necessary anymore and the implementation may be the same for both contexts now, which is usually implemented in the function SysCpuGetCallstackEntry().

                - SysCpuSearchOnStack_():
                In case of an exception in an external C function and the case that SysCpuGetCallstackEntry2() was not able to roll back  the call stack, it is tried to find a pattern, placed by the CODESYS application on the stack.This allows to roll back the call stack of the CODESYS application independent of the number of nested function call in the external C implementation.As the stack frame is the same for both contexts now, this function is not needed and should return ERR_NOTIMPLEMENTED.

                Please refer to the interface documentation of the SysCpuHandling interface in Components/SysCpuHandlingItf.h of your runtime toolkit for more detailed information and to the example implementation of the described functions in SysTemplates/Sys/SysCpuHandlingOS.c of your runtime toolkit.
                
</pre></div>
</div>
<p><strong>PlugIn:</strong></p>
<div class="line-block">
<div class="line">CodePPC.plugin (3.5.15.0)</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="s-embedded-floating-point-unit.html" title="6.2.30. embedded-floating-point-unit"
             >next</a> |</li>
        <li class="right" >
          <a href="s-double-precision-floating-point-apu.html" title="6.2.28. double-precision-floating-point-apu"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">RuntimeSystemOnlineHelp V3.5.14.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >6. TargetSettingsDoc (3.5.15.0)</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="category.html" >6.2. codegenerator</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, 3S-Smart Software Solutions GmbH.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>