
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CmpTemplate &#8212; RuntimeSystemOnlineHelp V3.5.14.0</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.14.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="RuntimeSystemOnlineHelp V3.5.14.0" href="../index.html" /> 
  </head>
  <body role="document">
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemOnlineHelp V3.5.14.0</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">CmpTemplate</a><ul>
<li><a class="reference internal" href="#data-structures">Data Structures</a></li>
<li><a class="reference internal" href="#macros">Macros</a></li>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#detailed-description">Detailed Description</a></li>
<li><a class="reference internal" href="#macro-definition-documentation">Macro Definition Documentation</a><ul>
<li><a class="reference internal" href="#define-staticitf-def-static">#define STATICITF_DEF static</a></li>
</ul>
</li>
<li><a class="reference internal" href="#function-documentation">Function Documentation</a><ul>
<li><a class="reference internal" href="#dll-decl-int-componententry-init-struct-pinitstruct">DLL_DECL int ComponentEntry (INIT_STRUCT *pInitStruct)</a></li>
<li><a class="reference internal" href="#static-ibase-createinstance-classid-cid-rts-result-presult">static IBase* CreateInstance (CLASSID cid, RTS_RESULT *pResult)</a></li>
<li><a class="reference internal" href="#static-rts-result-deleteinstance-ibase-pibase">static RTS_RESULT DeleteInstance (IBase *pIBase)</a></li>
<li><a class="reference internal" href="#static-int-exportfunctions-void">static int ExportFunctions (void)</a></li>
<li><a class="reference internal" href="#static-int-importfunctions-void">static int ImportFunctions (void)</a></li>
<li><a class="reference internal" href="#static-rts-ui32-cmpgetversion-void">static RTS_UI32 CmpGetVersion (void)</a></li>
<li><a class="reference internal" href="#static-rts-result-hookfunction-rts-ui32-ulhook-rts-uintptr-ulparam1-rts-uintptr-ulparam2">static RTS_RESULT HookFunction (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)</a></li>
<li><a class="reference internal" href="#implement-addref-static-implement-release-void-queryinterface-ibase-pbase-itfid-iid-rts-result-presult">IMPLEMENT_ADDREF static IMPLEMENT_RELEASE void* QueryInterface (IBase *pBase, ITFID iid, RTS_RESULT *pResult)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Examples/group___cmp_template.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cmptemplate">
<span id="group-cmp-template"></span><h1>CmpTemplate<a class="headerlink" href="#cmptemplate" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><a class="reference internal" href="#group-cmp-template-details"><span class="std std-ref">More...</span></a></div></blockquote>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>struct <a class="reference internal" href="struct_c_cmp_template.html#struct-c-cmp-template"><span class="std std-ref">CCmpTemplate</span></a></li>
</ul>
</div>
<div class="section" id="macros">
<h2>Macros<a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>#define <a class="reference internal" href="#group-cmp-template-1ga819be70ac9e7f8924fecb7b6db48cc4e"><span class="std std-ref">STATICITF_DEF</span></a> static</li>
</ul>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>DLL_DECL int <a class="reference internal" href="#group-cmp-template-1ga428e512ef9d385507218f5cb410ecf22"><span class="std std-ref">ComponentEntry</span></a> (INIT_STRUCT * pInitStruct)</li>
<li>IBase * <a class="reference internal" href="#group-cmp-template-1ga9f0dd7d920825aefbaa5a8b55d7be440"><span class="std std-ref">CreateInstance</span></a> (CLASSID cid, RTS_RESULT * pResult)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-cmp-template-1ga943bdf9b0e320026633f0a53e0595660"><span class="std std-ref">DeleteInstance</span></a> (IBase * pIBase)</li>
<li>int <a class="reference internal" href="#group-cmp-template-1ga9b0700711be53a466c6c8494343a465a"><span class="std std-ref">ExportFunctions</span></a> (void)</li>
<li>int <a class="reference internal" href="#group-cmp-template-1ga87d62c8eb63af9f15a122c28448733bf"><span class="std std-ref">ImportFunctions</span></a> (void)</li>
<li>RTS_UI32 <a class="reference internal" href="#group-cmp-template-1gacf72d3e99274b04feca13b139859c539"><span class="std std-ref">CmpGetVersion</span></a> (void)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-cmp-template-1ga0b2ad195d710768e5fa78879787cd805"><span class="std std-ref">HookFunction</span></a> (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)</li>
<li>IMPLEMENT_ADDREF static IMPLEMENT_RELEASE void * <a class="reference internal" href="#group-cmp-template-1ga6abe2468348b8ceab360c498feae6c47"><span class="std std-ref">QueryInterface</span></a> (IBase * pBase, ITFID iid, RTS_RESULT * pResult)</li>
</ul>
</div>
<div class="section" id="detailed-description">
<span id="group-cmp-template-details"></span><h2>Detailed Description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>Example for a runtime component frame that can be used as a starting point to develop own components.</p>
<p>MANDATORY FUNCTIONS:</p>
<ul class="simple">
<li><span class="xref std std-ref">ComponentEntry()</span></li>
<li>ExportFunctions()</li>
<li>ImportFunctions()</li>
<li>CmpGetVersion()</li>
<li>HookFunction()</li>
</ul>
<p>OPTIONAL FUNCTIONS:</p>
<ul class="simple">
<li>CreateInstance() + DeleteInstance() + QueryInterface(): Only for C++ Runtimes or if you implement at least a multiple instantiable interface (like CmpIoDrvItf or CmpLogBackendItf)</li>
</ul>
<p><strong>Copyright:</strong></p>
<p>(c) 2003-2016 3S-Smart Software Solutions</p>
</div>
<div class="section" id="macro-definition-documentation">
<h2>Macro Definition Documentation<a class="headerlink" href="#macro-definition-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="define-staticitf-def-static">
<span id="group-cmp-template-1ga819be70ac9e7f8924fecb7b6db48cc4e"></span><h3>#define STATICITF_DEF static<a class="headerlink" href="#define-staticitf-def-static" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="function-documentation">
<h2>Function Documentation<a class="headerlink" href="#function-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dll-decl-int-componententry-init-struct-pinitstruct">
<span id="group-cmp-template-1ga428e512ef9d385507218f5cb410ecf22"></span><h3>DLL_DECL int ComponentEntry (INIT_STRUCT <a href="#id1"><span class="problematic" id="id2">*</span></a>pInitStruct)<a class="headerlink" href="#dll-decl-int-componententry-init-struct-pinitstruct" title="Permalink to this headline">¶</a></h3>
<p>Entry function of the component. Called at startup for each component. Used to exchange function pointers with the component manager.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="2%" />
<col width="3%" />
<col width="96%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pInitStruct</td>
<td>Pointer to structure with: pfExportFunctions OUT Pointer to function that exports component functions pfImportFunctions OUT Pointer to function that imports functions from other components pfGetVersion OUT Pointer to function to get component version pfRegisterAPI IN Pointer to component mangager function to register a api function pfGetAPI IN Pointer to component mangager function to get a api function pfCallHook IN Pointer to component mangager function to call a hook function</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>ERR_OK if component could be initialized, else error code.</p>
</div>
<div class="section" id="static-ibase-createinstance-classid-cid-rts-result-presult">
<span id="group-cmp-template-1ga9f0dd7d920825aefbaa5a8b55d7be440"></span><h3>static IBase* CreateInstance (CLASSID cid, RTS_RESULT <a href="#id3"><span class="problematic" id="id4">*</span></a>pResult)<a class="headerlink" href="#static-ibase-createinstance-classid-cid-rts-result-presult" title="Permalink to this headline">¶</a></h3>
<p>OPTIONAL FUNCTION: Function is used to instantiate an object of the specified class if your component is used in a C++ runtime or if you implement at least a multiple instantiable interface like CmpIoDrvItf or CmpLogBackendItf.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>cid</td>
<td>Requested ClassID to instantiate</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>pResult</td>
<td>Pointer to error code</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Return a pointer to IBase interface of the newly created class object</p>
</div>
<div class="section" id="static-rts-result-deleteinstance-ibase-pibase">
<span id="group-cmp-template-1ga943bdf9b0e320026633f0a53e0595660"></span><h3>static RTS_RESULT DeleteInstance (IBase <a href="#id5"><span class="problematic" id="id6">*</span></a>pIBase)<a class="headerlink" href="#static-rts-result-deleteinstance-ibase-pibase" title="Permalink to this headline">¶</a></h3>
<p>OPTIONAL FUNCTION: Function is called to delete the object created in CreateInstance().</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="12%" />
<col width="74%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pIBase</td>
<td>Pointer to IBase interface to delete the object</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Error code</p>
</div>
<div class="section" id="static-int-exportfunctions-void">
<span id="group-cmp-template-1ga9b0700711be53a466c6c8494343a465a"></span><h3>static int ExportFunctions (void)<a class="headerlink" href="#static-int-exportfunctions-void" title="Permalink to this headline">¶</a></h3>
<p>Publish exported functions to the component manager, to make them available for other components. Use generated macro EXPORT_STMT.
<strong>Returns:</strong></p>
<p>ERR_OK or error code in case of error</p>
</div>
<div class="section" id="static-int-importfunctions-void">
<span id="group-cmp-template-1ga87d62c8eb63af9f15a122c28448733bf"></span><h3>static int ImportFunctions (void)<a class="headerlink" href="#static-int-importfunctions-void" title="Permalink to this headline">¶</a></h3>
<p>Import function pointers from other components. Use generated macro IMPORT_STMT.
<strong>Returns:</strong></p>
<p>ERR_OK or error code if function name could not be resolved</p>
</div>
<div class="section" id="static-rts-ui32-cmpgetversion-void">
<span id="group-cmp-template-1gacf72d3e99274b04feca13b139859c539"></span><h3>static RTS_UI32 CmpGetVersion (void)<a class="headerlink" href="#static-rts-ui32-cmpgetversion-void" title="Permalink to this headline">¶</a></h3>
<p>Return the version of our component.
<strong>Returns:</strong></p>
<p>Version as defined in dep file</p>
</div>
<div class="section" id="static-rts-result-hookfunction-rts-ui32-ulhook-rts-uintptr-ulparam1-rts-uintptr-ulparam2">
<span id="group-cmp-template-1ga0b2ad195d710768e5fa78879787cd805"></span><h3>static RTS_RESULT HookFunction (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)<a class="headerlink" href="#static-rts-result-hookfunction-rts-ui32-ulhook-rts-uintptr-ulparam1-rts-uintptr-ulparam2" title="Permalink to this headline">¶</a></h3>
<p>Hook function to get all broadcast hooks of the component manager. All init and exit stuff must be implemented here!</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="11%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>ulHook</td>
<td>Kind of hook. See <a href="#id11"><span class="problematic" id="id12">CH_</span></a> definitions in CmpItf.h for details.</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulParam1</td>
<td>Hook specific first parameter. See definitions in CmpItf.h for details.</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulParam2</td>
<td>Hook specific second parameter. See definitions in CmpItf.h for details.</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Error code</p>
</div>
<div class="section" id="implement-addref-static-implement-release-void-queryinterface-ibase-pbase-itfid-iid-rts-result-presult">
<span id="group-cmp-template-1ga6abe2468348b8ceab360c498feae6c47"></span><h3>IMPLEMENT_ADDREF static IMPLEMENT_RELEASE void* QueryInterface (IBase <a href="#id7"><span class="problematic" id="id8">*</span></a>pBase, ITFID iid, RTS_RESULT <a href="#id9"><span class="problematic" id="id10">*</span></a>pResult)<a class="headerlink" href="#implement-addref-static-implement-release-void-queryinterface-ibase-pbase-itfid-iid-rts-result-presult" title="Permalink to this headline">¶</a></h3>
<p>OPTIONAL FUNCTION: Function to query about all implemented interfaces of our class. Only for C-Runtimes! C++ QueryInterface() is automatically generated in the .cpp file of your component.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="15%" />
<col width="69%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>pBase</td>
<td>Pointer to IBase of our object</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>iid</td>
<td>Interface id of the requested interface</td>
</tr>
<tr class="row-odd"><td>[out]</td>
<td>pResult</td>
<td>Pointer to error code</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Return a pointer to the implemented interface</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemOnlineHelp V3.5.14.0</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, 3S-Smart Software Solutions GmbH.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>