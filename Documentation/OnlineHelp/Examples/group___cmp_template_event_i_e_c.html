

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>CmpTemplateEventIEC &#8212; RuntimeSystemDocumentation V3.5.16.40</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/theme.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cmptemplateeventiec">
<span id="group-cmp-template-event-i-e-c"></span><h1>CmpTemplateEventIEC<a class="headerlink" href="#cmptemplateeventiec" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#detailed-description" id="id3">Detailed Description</a></p></li>
<li><p><a class="reference internal" href="#macros" id="id4">Macros</a></p></li>
<li><p><a class="reference internal" href="#functions" id="id5">Functions</a></p></li>
<li><p><a class="reference internal" href="#macro-definition-documentation" id="id6">Macro Definition Documentation</a></p></li>
<li><p><a class="reference internal" href="#function-documentation" id="id7">Function Documentation</a></p></li>
</ul>
</div>
<div class="section" id="detailed-description">
<h2><a class="toc-backref" href="#id3">Detailed Description</a><a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>Simple example about using runtime system events in IEC applications.</p>
<p>Runtime system events are posted by various runtime components, and can be catched by other components by registering a callback function. They can be used for communication between runtime system components, and between runtime system components and the IEC application. The communication using events is more flexible than function calls, because the component that posts the event needs not to know the components that register to the event, and because a function call from runtime component to IEC application is not possible otherwise. This example shows how to generate events, and how to catch event in an IEC application. This is done by registering a callback function to events.</p>
<p>The example consists of this runtime component, a CODESYS library (CmpTemplateEventIEC.library), and a CODESYS test project (CmpTemplateEventIECTest.project). The runtime component creates the event at startup, and posts the event in the comm cycle. The CODESYS library defines event Ids and structures. This must correspond with the runtime component. The CODESYS test project is using the event by registering a callback function.</p>
<p>More examples about using events can be found in CmpTemplate and CmpTemplateEvent.</p>
<p>USAGE:</p>
<blockquote>
<div><ul class="simple">
<li><p>CAL_EventCreate2() must be called to register the callback function. IEC application can then call EventOpen and EventRegisterCallbackFunction.</p></li>
<li><p>CAL_EventClose() must be called to close the event</p></li>
<li><p>CAL_EventPost() is called to post the event, and registered callback function will be called</p></li>
</ul>
</div></blockquote>
<p><strong>Copyright:</strong></p>
<p>(c) 2003-2016 3S-Smart Software Solutions</p>
</div>
<div class="section" id="macros">
<h2><a class="toc-backref" href="#id4">Macros</a><a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>#define <a class="reference internal" href="#group-cmp-template-event-i-e-c-1ga819be70ac9e7f8924fecb7b6db48cc4e"><span class="std std-ref">STATICITF_DEF</span></a> static</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-template-event-i-e-c-1ga492e33351b2cfde38b6804d7b3d47d08"><span class="std std-ref">EVTPARAMID_CmpTemplateEventIEC</span></a> 0x0001</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-template-event-i-e-c-1ga395e30afadb17120168376f1c5a3d626"><span class="std std-ref">EVTVERSION_CmpTemplateEventIEC</span></a> 0x0001</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-template-event-i-e-c-1ga10c345b74194d0146a39ebcd67a6bed9"><span class="std std-ref">EVT_Test</span></a> MAKE_EVENTID(EVTCLASS_INFO, 1)</p></li>
</ul>
</div>
<div class="section" id="functions">
<h2><a class="toc-backref" href="#id5">Functions</a><a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>USE_STMT DLL_DECL int <a class="reference internal" href="#group-cmp-template-event-i-e-c-1gae1981c15c8c2911ee56bc662c9ba86e9"><span class="std std-ref">ComponentEntry</span></a> (INIT_STRUCT * pInitStruct)</p></li>
<li><p>int <a class="reference internal" href="#group-cmp-template-event-i-e-c-1ga9b0700711be53a466c6c8494343a465a"><span class="std std-ref">ExportFunctions</span></a> (void)</p></li>
<li><p>int <a class="reference internal" href="#group-cmp-template-event-i-e-c-1ga87d62c8eb63af9f15a122c28448733bf"><span class="std std-ref">ImportFunctions</span></a> (void)</p></li>
<li><p>RTS_UI32 <a class="reference internal" href="#group-cmp-template-event-i-e-c-1gacf72d3e99274b04feca13b139859c539"><span class="std std-ref">CmpGetVersion</span></a> (void)</p></li>
<li><p>RTS_RESULT <a class="reference internal" href="#group-cmp-template-event-i-e-c-1ga0b2ad195d710768e5fa78879787cd805"><span class="std std-ref">HookFunction</span></a> (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)</p></li>
</ul>
</div>
<div class="section" id="macro-definition-documentation">
<h2><a class="toc-backref" href="#id6">Macro Definition Documentation</a><a class="headerlink" href="#macro-definition-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="define-staticitf-def-static">
<span id="group-cmp-template-event-i-e-c-1ga819be70ac9e7f8924fecb7b6db48cc4e"></span><h3>#define STATICITF_DEF static<a class="headerlink" href="#define-staticitf-def-static" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="define-evtparamid-cmptemplateeventiec-0x0001">
<span id="group-cmp-template-event-i-e-c-1ga492e33351b2cfde38b6804d7b3d47d08"></span><h3>#define EVTPARAMID_CmpTemplateEventIEC 0x0001<a class="headerlink" href="#define-evtparamid-cmptemplateeventiec-0x0001" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="define-evtversion-cmptemplateeventiec-0x0001">
<span id="group-cmp-template-event-i-e-c-1ga395e30afadb17120168376f1c5a3d626"></span><h3>#define EVTVERSION_CmpTemplateEventIEC 0x0001<a class="headerlink" href="#define-evtversion-cmptemplateeventiec-0x0001" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="define-evt-test-make-eventid-evtclass-info-1">
<span id="group-cmp-template-event-i-e-c-1ga10c345b74194d0146a39ebcd67a6bed9"></span><h3>#define EVT_Test MAKE_EVENTID(EVTCLASS_INFO, 1)<a class="headerlink" href="#define-evt-test-make-eventid-evtclass-info-1" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="function-documentation">
<h2><a class="toc-backref" href="#id7">Function Documentation</a><a class="headerlink" href="#function-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="use-stmt-dll-decl-int-componententry-init-struct-pinitstruct">
<span id="group-cmp-template-event-i-e-c-1gae1981c15c8c2911ee56bc662c9ba86e9"></span><h3>USE_STMT DLL_DECL int ComponentEntry (INIT_STRUCT <a href="#id1"><span class="problematic" id="id2">*</span></a>pInitStruct)<a class="headerlink" href="#use-stmt-dll-decl-int-componententry-init-struct-pinitstruct" title="Permalink to this headline">¶</a></h3>
<p>Entry function of the component. Called at startup for each component. Used to exchange function pointers with the component manager.</p>
<p><strong>Parameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 3%" />
<col style="width: 96%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>[in]</p></td>
<td><p>pInitStruct</p></td>
<td><p>Pointer to structure with: pfExportFunctions OUT Pointer to function that exports component functions pfImportFunctions OUT Pointer to function that imports functions from other components pfGetVersion OUT Pointer to function to get component version pfRegisterAPI IN Pointer to component mangager function to register a api function pfGetAPI IN Pointer to component mangager function to get a api function pfCallHook IN Pointer to component mangager function to call a hook function</p></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>ERR_OK if component could be initialized, else error code.</p>
</div>
<div class="section" id="static-int-exportfunctions-void">
<span id="group-cmp-template-event-i-e-c-1ga9b0700711be53a466c6c8494343a465a"></span><h3>static int ExportFunctions (void)<a class="headerlink" href="#static-int-exportfunctions-void" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="static-int-importfunctions-void">
<span id="group-cmp-template-event-i-e-c-1ga87d62c8eb63af9f15a122c28448733bf"></span><h3>static int ImportFunctions (void)<a class="headerlink" href="#static-int-importfunctions-void" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="static-rts-ui32-cmpgetversion-void">
<span id="group-cmp-template-event-i-e-c-1gacf72d3e99274b04feca13b139859c539"></span><h3>static RTS_UI32 CmpGetVersion (void)<a class="headerlink" href="#static-rts-ui32-cmpgetversion-void" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="static-rts-result-hookfunction-rts-ui32-ulhook-rts-uintptr-ulparam1-rts-uintptr-ulparam2">
<span id="group-cmp-template-event-i-e-c-1ga0b2ad195d710768e5fa78879787cd805"></span><h3>static RTS_RESULT HookFunction (RTS_UI32 ulHook, RTS_UINTPTR ulParam1, RTS_UINTPTR ulParam2)<a class="headerlink" href="#static-rts-result-hookfunction-rts-ui32-ulhook-rts-uintptr-ulparam1-rts-uintptr-ulparam2" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, 3S-Smart Software Solutions GmbH. This document is confidential. Unauthorized copying, disclosure or distribution of this document and the information contained herein is strictly forbidden.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>