

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Driver property flags &#8212; RuntimeSystemDocumentation V3.5.16.40</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/theme.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
  </head><body>
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="driver-property-flags">
<span id="group-cmp-io-drv-itf-driverpropertyflags"></span><h1>Driver property flags<a class="headerlink" href="#driver-property-flags" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#detailed-description" id="id1">Detailed Description</a></p></li>
<li><p><a class="reference internal" href="#macros" id="id2">Macros</a></p></li>
<li><p><a class="reference internal" href="#macro-definition-documentation" id="id3">Macro Definition Documentation</a></p></li>
</ul>
</div>
<div class="section" id="detailed-description">
<h2><a class="toc-backref" href="#id1">Detailed Description</a><a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="macros">
<h2><a class="toc-backref" href="#id2">Macros</a><a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>#define <a class="reference internal" href="#group-cmp-io-drv-itf-driverpropertyflags-1gaa3e04ff36d2a2cf6aea62fad77e24c07"><span class="std std-ref">DRVPROP_CONSISTENCY</span></a> 0x0001</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-io-drv-itf-driverpropertyflags-1gaff712cbe129f82c1bd771045505ef39e"><span class="std std-ref">DRVPROP_WATCHTDOG</span></a> 0x0002</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-io-drv-itf-driverpropertyflags-1ga46846c30e617154a238e40719d0f1df0"><span class="std std-ref">DRVPROP_REDUNDANCY</span></a> 0x0004</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-io-drv-itf-driverpropertyflags-1gac5b514c81b24eae88ac081c4b8a48548"><span class="std std-ref">DRVPROP_ACTIVE</span></a> 0x0008</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-io-drv-itf-driverpropertyflags-1ga53bfdaf1086be80f8c6421b3707f3d1b"><span class="std std-ref">DRVPROP_ERROR_ACTIVE</span></a> 0x0010</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-io-drv-itf-driverpropertyflags-1gaf368665a0d4ce9c74095e9823b601ec2"><span class="std std-ref">DRVPROP_ERROR_PASSIVE</span></a> 0x0020</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-io-drv-itf-driverpropertyflags-1ga9a0b5e607e510b0eccae6c975af5420e"><span class="std std-ref">DRVPROP_BACKGROUND_GETDIAG</span></a> 0x0040</p></li>
<li><p>#define <a class="reference internal" href="#group-cmp-io-drv-itf-driverpropertyflags-1ga614d266cd71c32283e877639a5b960ea"><span class="std std-ref">DRVPROP_NO_SYNC</span></a> 0x0080</p></li>
</ul>
</div>
<div class="section" id="macro-definition-documentation">
<h2><a class="toc-backref" href="#id3">Macro Definition Documentation</a><a class="headerlink" href="#macro-definition-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="define-drvprop-consistency-0x0001">
<span id="group-cmp-io-drv-itf-driverpropertyflags-1gaa3e04ff36d2a2cf6aea62fad77e24c07"></span><h3>#define DRVPROP_CONSISTENCY 0x0001<a class="headerlink" href="#define-drvprop-consistency-0x0001" title="Permalink to this headline">¶</a></h3>
<p>These property flags can be used by I/O drivers to influence the behavior of the I/O Manager.</p>
<p>NOTE:</p>
<p>The driver property flags DRVPROP_CONSISTENCY and DRVPROP_NO_SYNC influence the task synchronization behavior of the I/O Manager (CmpIoMgr):</p>
<p>Case 1: Neither DRVPROP_CONSISTENCY nor DRVPROP_NO_SYNC is set:</p>
<p>All calls of ReadInputs, WriteOutputs, and StartBusCycle are mutually locked with the same lock. No concurrent calls of these functions are possible at all.</p>
<p>Case 2: DRVPROP_CONSISTENCY is set:</p>
<p>Same lock as in case 1, but during the execution of ReadInputs further concurrent calls (only) of ReadInputs are allowed - analogous behavior with WriteOutputs.</p>
<p>Case 3: DRVPROP_NO_SYNC is set:</p>
<p>The I/O manager does not synchronize concurrent calls of ReadInputs, WriteOutputs, and StartBusCycle at all. The I/O driver can use the functions <a class="reference internal" href="group___cmp_io_mgr_itf.html#group-cmp-io-mgr-itf-1ga6a3b8890a62765ebd5902a8219a4856b"><span class="std std-ref">IoMgrLockEnter()</span></a> and <a class="reference internal" href="group___cmp_io_mgr_itf.html#group-cmp-io-mgr-itf-1gad60fc91020763335cd2efea24e149b25"><span class="std std-ref">IoMgrLockLeave()</span></a> for synchronization:</p>
<blockquote>
<div><ul class="simple">
<li><p>IOMGR_LOCK_READ_INPUTS locks critical sections in <a class="reference internal" href="group___cmp_io_drv_itf.html#group-cmp-io-drv-itf-1ga48f414affb4bb84e803e08b48eaa1ea1"><span class="std std-ref">IoDrvReadInputs()</span></a> and <a class="reference internal" href="group___cmp_io_drv_itf.html#group-cmp-io-drv-itf-1ga7712716bf87ce241c22958db3aa19bcc"><span class="std std-ref">IoDrvStartBusCycle()</span></a> .</p></li>
<li><p>IOMGR_LOCK_WRITE_OUTPUTS locks critical sections in <a class="reference internal" href="group___cmp_io_drv_itf.html#group-cmp-io-drv-itf-1gae25ad6b1f53f6935b17125d9757aad45"><span class="std std-ref">IoDrvWriteOutputs()</span></a> and <a class="reference internal" href="group___cmp_io_drv_itf.html#group-cmp-io-drv-itf-1ga7712716bf87ce241c22958db3aa19bcc"><span class="std std-ref">IoDrvStartBusCycle()</span></a> .</p></li>
</ul>
</div></blockquote>
<p>IMPLEMENTATION NOTE: The behavior of the DRVPROP_CONSISTENCY and DRVPROP_NO_SYNC diver property flags can’t be implemented on all platforms. Platforms without synchronization functionality may not be able to implement this behavior. IoMgrEmbedded of the CODESYSControlEmbedded runtime system for example can only disable and enable all interrupts.</p>
<p>The I/O driver realizes bit-consistency by its own (atomic bit access). If this flag is 0, the I/O Manager takes care about the consistency.</p>
</div>
<div class="section" id="define-drvprop-watchtdog-0x0002">
<span id="group-cmp-io-drv-itf-driverpropertyflags-1gaff712cbe129f82c1bd771045505ef39e"></span><h3>#define DRVPROP_WATCHTDOG 0x0002<a class="headerlink" href="#define-drvprop-watchtdog-0x0002" title="Permalink to this headline">¶</a></h3>
<p>The I/O driver needs a cyclic call to the IoDrvWatchdogTrigger interface function. This property is deprecated.</p>
</div>
<div class="section" id="define-drvprop-redundancy-0x0004">
<span id="group-cmp-io-drv-itf-driverpropertyflags-1ga46846c30e617154a238e40719d0f1df0"></span><h3>#define DRVPROP_REDUNDANCY 0x0004<a class="headerlink" href="#define-drvprop-redundancy-0x0004" title="Permalink to this headline">¶</a></h3>
<p>The I/O driver is running in redundancy mode (passive)</p>
</div>
<div class="section" id="define-drvprop-active-0x0008">
<span id="group-cmp-io-drv-itf-driverpropertyflags-1gac5b514c81b24eae88ac081c4b8a48548"></span><h3>#define DRVPROP_ACTIVE 0x0008<a class="headerlink" href="#define-drvprop-active-0x0008" title="Permalink to this headline">¶</a></h3>
<p>The I/O driver is running in redundancy mode (active).</p>
</div>
<div class="section" id="define-drvprop-error-active-0x0010">
<span id="group-cmp-io-drv-itf-driverpropertyflags-1ga53bfdaf1086be80f8c6421b3707f3d1b"></span><h3>#define DRVPROP_ERROR_ACTIVE 0x0010<a class="headerlink" href="#define-drvprop-error-active-0x0010" title="Permalink to this headline">¶</a></h3>
<p>Inform the 3S redundancy Manager about an error of an active driver. This will lead to a switch between active and passive PLC.</p>
</div>
<div class="section" id="define-drvprop-error-passive-0x0020">
<span id="group-cmp-io-drv-itf-driverpropertyflags-1gaf368665a0d4ce9c74095e9823b601ec2"></span><h3>#define DRVPROP_ERROR_PASSIVE 0x0020<a class="headerlink" href="#define-drvprop-error-passive-0x0020" title="Permalink to this headline">¶</a></h3>
<p>Inform the 3S redundancy Manager about an error of a passive driver.</p>
</div>
<div class="section" id="define-drvprop-background-getdiag-0x0040">
<span id="group-cmp-io-drv-itf-driverpropertyflags-1ga9a0b5e607e510b0eccae6c975af5420e"></span><h3>#define DRVPROP_BACKGROUND_GETDIAG 0x0040<a class="headerlink" href="#define-drvprop-background-getdiag-0x0040" title="Permalink to this headline">¶</a></h3>
<p>If this property is set, the interface function <a class="reference internal" href="group___cmp_io_drv_itf.html#group-cmp-io-drv-itf-1gaca801830078ea9485613f2491e35575d"><span class="std std-ref">IoDrvGetModuleDiagnosis()</span></a> of the driver is called cyclically from a background task. NOTE: In this case, IoDrvGetModuleDiagnosis is called with: IoDrvGetModuleDiagnosis(hIoDrv, NULL); This must be handled correctly in the IO-driver!</p>
</div>
<div class="section" id="define-drvprop-no-sync-0x0080">
<span id="group-cmp-io-drv-itf-driverpropertyflags-1ga614d266cd71c32283e877639a5b960ea"></span><h3>#define DRVPROP_NO_SYNC 0x0080<a class="headerlink" href="#define-drvprop-no-sync-0x0080" title="Permalink to this headline">¶</a></h3>
<p>Disable synchronization for ReadInputs/WriteOutputs/StartBusCycle in the I/O Manager (CmpIoMgr). In this case the I/O driver has to implement the synchronization of these functions itself. CmpIoMgr provides the following functions that can be used by the I/O driver for synchronization: <a class="reference internal" href="group___cmp_io_mgr_itf.html#group-cmp-io-mgr-itf-1ga6a3b8890a62765ebd5902a8219a4856b"><span class="std std-ref">IoMgrLockEnter()</span></a> <a class="reference internal" href="group___cmp_io_mgr_itf.html#group-cmp-io-mgr-itf-1gad60fc91020763335cd2efea24e149b25"><span class="std std-ref">IoMgrLockLeave()</span></a></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, 3S-Smart Software Solutions GmbH. This document is confidential. Unauthorized copying, disclosure or distribution of this document and the information contained herein is strictly forbidden.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>