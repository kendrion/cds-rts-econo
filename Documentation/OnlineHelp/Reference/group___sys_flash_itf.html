
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5.2.125. SysFlashItf &#8212; RuntimeSystemOnlineHelp V3.5.14.0</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.14.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="RuntimeSystemOnlineHelp V3.5.14.0" href="../index.html" />
    <link rel="up" title="5. Reference" href="index.html" />
    <link rel="next" title="5.2.126. SysFramebufferItf" href="group___sys_framebuffer_itf.html" />
    <link rel="prev" title="5.2.124. SysFileStreamItf" href="group___sys_file_stream_itf.html" /> 
  </head>
  <body role="document">
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="group___sys_framebuffer_itf.html" title="5.2.126. SysFramebufferItf"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="group___sys_file_stream_itf.html" title="5.2.124. SysFileStreamItf"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemOnlineHelp V3.5.14.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">5. Reference</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">5.2.125. SysFlashItf</a><ul>
<li><a class="reference internal" href="#modules">5.2.125.1. Modules</a></li>
<li><a class="reference internal" href="#data-structures">5.2.125.2. Data Structures</a></li>
<li><a class="reference internal" href="#macros">5.2.125.3. Macros</a></li>
<li><a class="reference internal" href="#typedefs">5.2.125.4. Typedefs</a></li>
<li><a class="reference internal" href="#functions">5.2.125.5. Functions</a></li>
<li><a class="reference internal" href="#detailed-description">5.2.125.6. Detailed Description</a></li>
<li><a class="reference internal" href="#macro-definition-documentation">5.2.125.7. Macro Definition Documentation</a><ul>
<li><a class="reference internal" href="#define-itf-sysflash">5.2.125.7.1. #define ITF_SysFlash</a></li>
<li><a class="reference internal" href="#define-extitf-sysflash">5.2.125.7.2. #define EXTITF_SysFlash</a></li>
</ul>
</li>
<li><a class="reference internal" href="#typedef-documentation">5.2.125.8. Typedef Documentation</a><ul>
<li><a class="reference internal" href="#typedef-isysflash-c-isysflash">5.2.125.8.1. typedef ISysFlash_C ISysFlash</a></li>
</ul>
</li>
<li><a class="reference internal" href="#function-documentation">5.2.125.9. Function Documentation</a><ul>
<li><a class="reference internal" href="#rts-result-sysflashinit-flasharea-fa">5.2.125.9.1. RTS_RESULT SysFlashInit (FlashArea fa)</a></li>
<li><a class="reference internal" href="#rts-result-sysflasherase-flasharea-fa-rts-size-ulsize-rts-size-uloffset">5.2.125.9.2. RTS_RESULT SysFlashErase (FlashArea fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)</a></li>
<li><a class="reference internal" href="#rts-result-sysflashread-flasharea-fa-char-pcdest-rts-size-ulsize-rts-size-uloffset">5.2.125.9.3. RTS_RESULT SysFlashRead (FlashArea fa, char *pcDest, RTS_SIZE ulSize, RTS_SIZE ulOffset)</a></li>
<li><a class="reference internal" href="#rts-result-sysflashwrite-flasharea-fa-char-pcsource-rts-size-ulsize-rts-size-uloffset">5.2.125.9.4. RTS_RESULT SysFlashWrite (FlashArea fa, char *pcSource, RTS_SIZE ulSize, RTS_SIZE ulOffset)</a></li>
<li><a class="reference internal" href="#rts-result-sysflashflush-flasharea-fa-rts-size-ulsize-rts-size-uloffset">5.2.125.9.5. RTS_RESULT SysFlashFlush (FlashArea fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)</a></li>
<li><a class="reference internal" href="#rts-uintptr-sysflashgetphysicaladdress-flasharea-fa-rts-result-presult">5.2.125.9.6. RTS_UINTPTR SysFlashGetPhysicalAddress (FlashArea fa, RTS_RESULT *pResult)</a></li>
<li><a class="reference internal" href="#rts-size-sysflashgetsize-flasharea-fa-rts-result-presult">5.2.125.9.7. RTS_SIZE SysFlashGetSize (FlashArea fa, RTS_RESULT *pResult)</a></li>
<li><a class="reference internal" href="#group-sys-flash-itf-1ga21fd79f255440888df20a0a73f181d87">5.2.125.9.8. RTS_RESULT SysFlashErase_ (FlashArea fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)</a></li>
<li><a class="reference internal" href="#group-sys-flash-itf-1gaf5c5962662e1806888cfb0e624afee97">5.2.125.9.9. RTS_RESULT SysFlashRead_ (FlashArea fa, char *pcDest, RTS_SIZE ulSize, RTS_SIZE ulOffset)</a></li>
<li><a class="reference internal" href="#group-sys-flash-itf-1ga0e9c7a6ca1e7ac2637fae386cd4b84bd">5.2.125.9.10. RTS_RESULT SysFlashWrite_ (FlashArea fa, char *pcSource, RTS_SIZE ulSize, RTS_SIZE ulOffset)</a></li>
<li><a class="reference internal" href="#group-sys-flash-itf-1gaf4cc69f895ad17f6e6a7b31a4c290396">5.2.125.9.11. RTS_RESULT SysFlashFlush_ (FlashArea fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="group___sys_file_stream_itf.html"
                        title="previous chapter">5.2.124. SysFileStreamItf</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="group___sys_framebuffer_itf.html"
                        title="next chapter">5.2.126. SysFramebufferItf</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Reference/group___sys_flash_itf.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="sysflashitf">
<span id="group-sys-flash-itf"></span><h1>5.2.125. SysFlashItf<a class="headerlink" href="#sysflashitf" title="Permalink to this headline">¶</a></h1>
<p>Interface of SysFlash. <a class="reference internal" href="#group-sys-flash-itf-details"><span class="std std-ref">More...</span></a></p>
<div class="section" id="modules">
<h2>5.2.125.1. Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings"><span class="std std-ref">Settings</span></a></li>
</ul>
</div>
<div class="section" id="data-structures">
<h2>5.2.125.2. Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>struct <a class="reference internal" href="struct_i_sys_flash___c.html#struct-i-sys-flash-c"><span class="std std-ref">ISysFlash_C</span></a></li>
</ul>
</div>
<div class="section" id="macros">
<h2>5.2.125.3. Macros<a class="headerlink" href="#macros" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>#define <a class="reference internal" href="#group-sys-flash-itf-1gad98347a44879f880ca649f97934fed34"><span class="std std-ref">ITF_SysFlash</span></a></li>
<li>#define <a class="reference internal" href="#group-sys-flash-itf-1ga5fc3ff2d8067e4738c18823cfb9732a6"><span class="std std-ref">EXTITF_SysFlash</span></a></li>
</ul>
</div>
<div class="section" id="typedefs">
<h2>5.2.125.4. Typedefs<a class="headerlink" href="#typedefs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>typedef <a class="reference internal" href="struct_i_sys_flash___c.html#struct-i-sys-flash-c"><span class="std std-ref">ISysFlash_C</span></a> <a class="reference internal" href="#group-sys-flash-itf-1ga777a60308a85d8ff0f0c1d4f1ab5d862"><span class="std std-ref">ISysFlash</span></a></li>
</ul>
</div>
<div class="section" id="functions">
<h2>5.2.125.5. Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1ga35fbff0ae7e4a8e206b57b89d4277e58"><span class="std std-ref">SysFlashInit</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1gae5d531621146c84a4da162ea1f07175b"><span class="std std-ref">SysFlashErase</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1ga26f8bf1c7020cf6001a923599e72531c"><span class="std std-ref">SysFlashRead</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, char * pcDest, RTS_SIZE ulSize, RTS_SIZE ulOffset)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1ga7f6f843ecfa4d0a430cfea4c5b0c7dc0"><span class="std std-ref">SysFlashWrite</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, char * pcSource, RTS_SIZE ulSize, RTS_SIZE ulOffset)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1gaf63efee5ecd81889352162c5d8dc4ca3"><span class="std std-ref">SysFlashFlush</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)</li>
<li>RTS_UINTPTR <a class="reference internal" href="#group-sys-flash-itf-1gada6709acd984a4eed5308a522d085936"><span class="std std-ref">SysFlashGetPhysicalAddress</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, RTS_RESULT * pResult)</li>
<li>RTS_SIZE <a class="reference internal" href="#group-sys-flash-itf-1ga30d51584eebad5d2d74dfec73c34bc08"><span class="std std-ref">SysFlashGetSize</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, RTS_RESULT * pResult)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1ga21fd79f255440888df20a0a73f181d87"><span class="std std-ref">SysFlashErase_</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1gaf5c5962662e1806888cfb0e624afee97"><span class="std std-ref">SysFlashRead_</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, char * pcDest, RTS_SIZE ulSize, RTS_SIZE ulOffset)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1ga0e9c7a6ca1e7ac2637fae386cd4b84bd"><span class="std std-ref">SysFlashWrite_</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, char * pcSource, RTS_SIZE ulSize, RTS_SIZE ulOffset)</li>
<li>RTS_RESULT <a class="reference internal" href="#group-sys-flash-itf-1gaf4cc69f895ad17f6e6a7b31a4c290396"><span class="std std-ref">SysFlashFlush_</span></a> (<a class="reference internal" href="group___sys_flash_itf___settings.html#group-sys-flash-itf-settings-1ga592e77b8379be53433be404615060ceb"><span class="std std-ref">FlashArea</span></a>  fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)</li>
</ul>
</div>
<div class="section" id="detailed-description">
<span id="group-sys-flash-itf-details"></span><h2>5.2.125.6. Detailed Description<a class="headerlink" href="#detailed-description" title="Permalink to this headline">¶</a></h2>
<p>Interface of SysFlash.</p>
<p>The SysFlash interface is projected to get access to flash memory of a controller. It has to be adpated to your flash.</p>
<p>There are functions to read and write to flash memory. It is used by some implementations of the file component (SysFileFlash) to store some files in flash, and by the application component for execution of user code in flash. The SysFlash Component divides two different kinds of flash areas: FA_CODE and FA_FILE. FA_FILE is only needed, if SysFileFlash is used. Please see further description for SysFileFlash and our Flash-Filesystem. Please note that the offsets of the files have to correspond with sector borders of the flash. One file should be stored in one sector.</p>
<p>There is also the possibility to use more than one code area in the project and to move the application code between those areas. The OEM SysFlash implementation should then check the offset parameter and decide, which of the flash areas should be modified then. When the offset parameter is bigger than the first code area for example, then the second code area should be accessed.</p>
<p><strong>Copyright:</strong></p>
<p>Copyright (c) 2017-2018 CODESYS GmbH, Copyright (c) 1994-2016 3S-Smart Software Solutions GmbH. All rights reserved.</p>
</div>
<div class="section" id="macro-definition-documentation">
<h2>5.2.125.7. Macro Definition Documentation<a class="headerlink" href="#macro-definition-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="define-itf-sysflash">
<span id="group-sys-flash-itf-1gad98347a44879f880ca649f97934fed34"></span><h3>5.2.125.7.1. #define ITF_SysFlash<a class="headerlink" href="#define-itf-sysflash" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="define-extitf-sysflash">
<span id="group-sys-flash-itf-1ga5fc3ff2d8067e4738c18823cfb9732a6"></span><h3>5.2.125.7.2. #define EXTITF_SysFlash<a class="headerlink" href="#define-extitf-sysflash" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="typedef-documentation">
<h2>5.2.125.8. Typedef Documentation<a class="headerlink" href="#typedef-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="typedef-isysflash-c-isysflash">
<span id="group-sys-flash-itf-1ga777a60308a85d8ff0f0c1d4f1ab5d862"></span><h3>5.2.125.8.1. typedef ISysFlash_C ISysFlash<a class="headerlink" href="#typedef-isysflash-c-isysflash" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="function-documentation">
<h2>5.2.125.9. Function Documentation<a class="headerlink" href="#function-documentation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rts-result-sysflashinit-flasharea-fa">
<span id="group-sys-flash-itf-1ga35fbff0ae7e4a8e206b57b89d4277e58"></span><h3>5.2.125.9.1. RTS_RESULT SysFlashInit (FlashArea fa)<a class="headerlink" href="#rts-result-sysflashinit-flasharea-fa" title="Permalink to this headline">¶</a></h3>
<p>Init the flash system</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="3%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash init was successful</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_FAILED</td>
<td>Flash could not be initialized</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-sysflasherase-flasharea-fa-rts-size-ulsize-rts-size-uloffset">
<span id="group-sys-flash-itf-1gae5d531621146c84a4da162ea1f07175b"></span><h3>5.2.125.9.2. RTS_RESULT SysFlashErase (FlashArea fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)<a class="headerlink" href="#rts-result-sysflasherase-flasharea-fa-rts-size-ulsize-rts-size-uloffset" title="Permalink to this headline">¶</a></h3>
<p>Erases a block of flash memory. You must erase a flash area before writing to it. This function is implemented in the generic part of SysFlash and splits up the block to erase in several smaller pieces with the maximum size of EraseBlockSize. For each piece <a class="reference internal" href="#group-sys-flash-itf-1ga21fd79f255440888df20a0a73f181d87"><span class="std std-ref">SysFlashErase_()</span></a> and the CommCycleHook is called, to keep the rest of the RTS also on single-tasking systems alive.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulSize</td>
<td>Size of flash area to erase RANGE=[0,VALID_FLASH_SIZE,INVALID_FLASH_SIZE]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulOffset</td>
<td>Offset of flash area to erase. The function adds the start address of the flash to calculate the physical address of the area. RANGE=[0,VALID_FLASH_OFFSET,INVALID_FLASH_OFFSET]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash erase was successful</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>size or offset wrong</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Flash could not be erased</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-sysflashread-flasharea-fa-char-pcdest-rts-size-ulsize-rts-size-uloffset">
<span id="group-sys-flash-itf-1ga26f8bf1c7020cf6001a923599e72531c"></span><h3>5.2.125.9.3. RTS_RESULT SysFlashRead (FlashArea fa, char <a href="#id1"><span class="problematic" id="id2">*</span></a>pcDest, RTS_SIZE ulSize, RTS_SIZE ulOffset)<a class="headerlink" href="#rts-result-sysflashread-flasharea-fa-char-pcdest-rts-size-ulsize-rts-size-uloffset" title="Permalink to this headline">¶</a></h3>
<p>Reads a block of memory from the flash. This function is implemented in the generic part of SysFlash and splits up the block to read in several smaller pieces with the maximum size of ReadBlockSize. For each piece <a class="reference internal" href="#group-sys-flash-itf-1gaf5c5962662e1806888cfb0e624afee97"><span class="std std-ref">SysFlashRead_()</span></a> and the CommCycleHook is called, to keep the rest of the RTS also on single-tasking systems alive.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="5%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>pcDest</td>
<td>Pointer to buffer that receives the data RANGE=[0,INVALID_DEST_BUFFER,VALID_DEST_BUFFER]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulSize</td>
<td>Size of the buffer RANGE=[0,VALID_BUFFER_SIZE,INVALID_BUFFER_SIZE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulOffset</td>
<td>Offset of flash area to read from. The function adds the start address of the flash to calculate the physical address of the area. RANGE=[0,VALID_FLASH_OFFSET,INVALID_FLASH_OFFSET]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash read was successful</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>pcDest,size or offset wrong or null</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Flash could not be read</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-sysflashwrite-flasharea-fa-char-pcsource-rts-size-ulsize-rts-size-uloffset">
<span id="group-sys-flash-itf-1ga7f6f843ecfa4d0a430cfea4c5b0c7dc0"></span><h3>5.2.125.9.4. RTS_RESULT SysFlashWrite (FlashArea fa, char <a href="#id3"><span class="problematic" id="id4">*</span></a>pcSource, RTS_SIZE ulSize, RTS_SIZE ulOffset)<a class="headerlink" href="#rts-result-sysflashwrite-flasharea-fa-char-pcsource-rts-size-ulsize-rts-size-uloffset" title="Permalink to this headline">¶</a></h3>
<p>Writes a block of data to the flash. The flash area has to be erased first with SysFlashErase. This function is implemented in the generic part of SysFlash and splits up the block to write in several smaller pieces with the maximum size of WriteBlockSize. For each piece <span class="xref std std-ref">SysFlashWrite()</span> and the CommCycleHook is called, to keep the rest of the RTS also on single-tasking systems alive.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>pcSource</td>
<td>Pointer to buffer that contains the data RANGE=[0,INVALID_SRC_BUFFER,VALID_SRC_BUFFER]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulSize</td>
<td>Size of the buffer RANGE=[0,VALID_BUFFER_SIZE,INVALID_BUFFER_SIZE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulOffset</td>
<td>Offset of flash area to write to. The function adds the start address of the flash to calculate the physical address of the area. RANGE=[0,VALID_FLASH_OFFSET,INVALID_FLASH_OFFSET]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash read was successful</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>pcSrc,size or offset wrong or null</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Flash could not be read</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-result-sysflashflush-flasharea-fa-rts-size-ulsize-rts-size-uloffset">
<span id="group-sys-flash-itf-1gaf63efee5ecd81889352162c5d8dc4ca3"></span><h3>5.2.125.9.5. RTS_RESULT SysFlashFlush (FlashArea fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)<a class="headerlink" href="#rts-result-sysflashflush-flasharea-fa-rts-size-ulsize-rts-size-uloffset" title="Permalink to this headline">¶</a></h3>
<p>Called when a file that was opened for writing is closed. This function is implemented in the generic part of SysFlash and splits up the block to flush in several smaller pieces with the maximum size of FlushBlockSize. For each piece <span class="xref std std-ref">SysFlashFlush()</span> and the CommCycleHook is called, to keep the rest of the RTS also on single-tasking systems alive.</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulSize</td>
<td>Size of the buffer RANGE=[0,VALID_BUFFER_SIZE,INVALID_BUFFER_SIZE]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulOffset</td>
<td>Offset of flash area to write to. The function adds the start address of the flash to calculate the physical address of the area. RANGE=[0,VALID_FLASH_OFFSET,INVALID_FLASH_OFFSET]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash flush was successful</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>size or offset wrong or null</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Flash could not be flushed</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="rts-uintptr-sysflashgetphysicaladdress-flasharea-fa-rts-result-presult">
<span id="group-sys-flash-itf-1gada6709acd984a4eed5308a522d085936"></span><h3>5.2.125.9.6. RTS_UINTPTR SysFlashGetPhysicalAddress (FlashArea fa, RTS_RESULT <a href="#id5"><span class="problematic" id="id6">*</span></a>pResult)<a class="headerlink" href="#rts-uintptr-sysflashgetphysicaladdress-flasharea-fa-rts-result-presult" title="Permalink to this headline">¶</a></h3>
<p>Retrieve the physical address of a flash area</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="7%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>bWriteFlashPattern</td>
<td><strong>*PSEUDO*</strong> A pattern was written to the flash, using <span class="xref std std-ref">SysFlashWrite()</span> , before the call to <span class="xref std std-ref">SysFlashGetPhysicalAddress()</span> . RANGE=[TRUE,FALSE]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>bWriteMemoryPattern</td>
<td><strong>*PSEUDO*</strong> A pattern was written to the flash, using direct memory access, before the call to <span class="xref std std-ref">SysFlashGetPhysicalAddress()</span> . RANGE=[TRUE,FALSE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>bFlashFlush</td>
<td><strong>*PSEUDO*</strong> <span class="xref std std-ref">SysFlashFlush()</span> was called before the call to <span class="xref std std-ref">SysFlashGetPhysicalAddress()</span> . RANGE=[TRUE,FALSE]</td>
</tr>
<tr class="row-odd"><td>[out]</td>
<td>bExceptionGenerated</td>
<td><strong>*PSEUDO*</strong> An exception was generated. RANGE=[TRUE,FALSE]</td>
</tr>
<tr class="row-even"><td>[out]</td>
<td>bPatternExists</td>
<td><strong>*PSEUDO*</strong> The pattern could be read, using standard memory access. RANGE=[TRUE,FALSE]</td>
</tr>
<tr class="row-odd"><td>[out]</td>
<td>pResult</td>
<td>Pointer to error code</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Startaddress was successful retrieved</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_FAILED</td>
<td>Startaddress could not be retrieved</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Physical address of flash area</p>
</div>
<div class="section" id="rts-size-sysflashgetsize-flasharea-fa-rts-result-presult">
<span id="group-sys-flash-itf-1ga30d51584eebad5d2d74dfec73c34bc08"></span><h3>5.2.125.9.7. RTS_SIZE SysFlashGetSize (FlashArea fa, RTS_RESULT <a href="#id7"><span class="problematic" id="id8">*</span></a>pResult)<a class="headerlink" href="#rts-size-sysflashgetsize-flasharea-fa-rts-result-presult" title="Permalink to this headline">¶</a></h3>
<p>Retrieve the size of a flash area</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[out]</td>
<td>pResult</td>
<td>Pointer to error code</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flashsize was successful retrieved</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_FAILED</td>
<td>Flashsize could not be retrieved</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>Size of flash area</p>
</div>
<div class="section" id="group-sys-flash-itf-1ga21fd79f255440888df20a0a73f181d87">
<span id="id9"></span><h3>5.2.125.9.8. RTS_RESULT <a href="#id17"><span class="problematic" id="id18">SysFlashErase_</span></a> (FlashArea fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)<a class="headerlink" href="#group-sys-flash-itf-1ga21fd79f255440888df20a0a73f181d87" title="Permalink to this headline">¶</a></h3>
<p>Erases a block of flash memory. You must erase a flash area before writing to it. The content of the flash area should be erased with 0 or ff. Must be implemented in the OS-specific part of SysFlash. Should only be called by <span class="xref std std-ref">SysFlashErase()</span> .</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulSize</td>
<td>Size of flash area to erase RANGE=[0,VALID_BUFFER_SIZE,INVALID_BUFFER_SIZE]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulOffset</td>
<td>Offset of flash area to erase. The function adds the start address of the flash to calculate the physical address of the area. RANGE=[0,VALID_FLASH_OFFSET,INVALID_FLASH_OFFSET]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash was successfully erased</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>Size or Offset is not correct</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Flash could not be erased</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="group-sys-flash-itf-1gaf5c5962662e1806888cfb0e624afee97">
<span id="id12"></span><h3>5.2.125.9.9. RTS_RESULT <a href="#id19"><span class="problematic" id="id20">SysFlashRead_</span></a> (FlashArea fa, char <a href="#id10"><span class="problematic" id="id11">*</span></a>pcDest, RTS_SIZE ulSize, RTS_SIZE ulOffset)<a class="headerlink" href="#group-sys-flash-itf-1gaf5c5962662e1806888cfb0e624afee97" title="Permalink to this headline">¶</a></h3>
<p>Reads a block of memory from the flash. Must be implemented in the OS-specific part of SysFlash. Should only be called by <span class="xref std std-ref">SysFlashRead()</span> .</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="5%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>pcDest</td>
<td>Pointer to buffer that receives the data RANGE=[0,INVALID_DEST_BUFFER,VALID_DEST_BUFFER]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulSize</td>
<td>Size of the buffer RANGE=[0,VALID_BUFFER_SIZE,INVALID_BUFFER_SIZE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulOffset</td>
<td>Offset of flash area to read from. The function adds the start address of the flash to calculate the physical address of the area. RANGE=[0,VALID_FLASH_OFFSET,INVALID_FLASH_OFFSET]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash was successfully read</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>Size or Offset is not correct</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Flash could not be read</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="group-sys-flash-itf-1ga0e9c7a6ca1e7ac2637fae386cd4b84bd">
<span id="id15"></span><h3>5.2.125.9.10. RTS_RESULT <a href="#id21"><span class="problematic" id="id22">SysFlashWrite_</span></a> (FlashArea fa, char <a href="#id13"><span class="problematic" id="id14">*</span></a>pcSource, RTS_SIZE ulSize, RTS_SIZE ulOffset)<a class="headerlink" href="#group-sys-flash-itf-1ga0e9c7a6ca1e7ac2637fae386cd4b84bd" title="Permalink to this headline">¶</a></h3>
<p>Writes a block of data to the flash. The flash area has to be erased first with SysFlashErase. Must be implemented in the OS-specific part of SysFlash. Should only be called by <span class="xref std std-ref">SysFlashWrite()</span> .</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>pcSource</td>
<td>Pointer to buffer that contains the data RANGE=[0,INVALID_SRC_BUFFER,VALID_SRC_BUFFER]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulSize</td>
<td>Size of the buffer RANGE=[0,VALID_BUFFER_SIZE,INVALID_BUFFER_SIZE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulOffset</td>
<td>Offset of flash area to write to. The function adds the start address of the flash to calculate the physical address of the area. RANGE=[0,VALID_FLASH_OFFSET,INVALID_FLASH_OFFSET]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash was successfully written</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>Size or Offset is not correct</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Flash could not be written</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
<div class="section" id="group-sys-flash-itf-1gaf4cc69f895ad17f6e6a7b31a4c290396">
<span id="id16"></span><h3>5.2.125.9.11. RTS_RESULT <a href="#id23"><span class="problematic" id="id24">SysFlashFlush_</span></a> (FlashArea fa, RTS_SIZE ulSize, RTS_SIZE ulOffset)<a class="headerlink" href="#group-sys-flash-itf-1gaf4cc69f895ad17f6e6a7b31a4c290396" title="Permalink to this headline">¶</a></h3>
<p>Called when a file that was opened for writing is closed. Normally, this function can be left empty. It can be useful, if the data is not written to flash directly, but buffered in RAM. The call of this function indicates that the file is closed and the data has to be written to flash. Must be implemented in the OS-specific part of SysFlash. Should only be called by <span class="xref std std-ref">SysFlashFlush()</span> .</p>
<p><strong>Parameters</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>[in]</td>
<td>fa</td>
<td>Flash area that shall be used for the operation. Now, FA_CODE and FA_FILE are defined. RANGE=[FA_UNKNOWN,FA_FILE,FA_CODE]</td>
</tr>
<tr class="row-even"><td>[in]</td>
<td>ulSize</td>
<td>Size of the buffer RANGE=[0,VALID_BUFFER_SIZE,INVALID_BUFFER_SIZE]</td>
</tr>
<tr class="row-odd"><td>[in]</td>
<td>ulOffset</td>
<td>Offset of flash area to write to. The function adds the start address of the flash to calculate the physical address of the area. RANGE=[0,VALID_FLASH_OFFSET,INVALID_FLASH_OFFSET]</td>
</tr>
</tbody>
</table>
<p><strong>Return values</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="65%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>ERR_OK</td>
<td>Flash was successfully flushed</td>
</tr>
<tr class="row-even"><td>ERR_NOT_SUPPORTED</td>
<td>Type of Flasharea is not supported</td>
</tr>
<tr class="row-odd"><td>ERR_PARAMETER</td>
<td>Size or Offset is not correct</td>
</tr>
<tr class="row-even"><td>ERR_FAILED</td>
<td>Flash could not be flushed</td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<p>error code</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="group___sys_framebuffer_itf.html" title="5.2.126. SysFramebufferItf"
             >next</a> |</li>
        <li class="right" >
          <a href="group___sys_file_stream_itf.html" title="5.2.124. SysFileStreamItf"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemOnlineHelp V3.5.14.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >5. Reference</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, 3S-Smart Software Solutions GmbH.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>