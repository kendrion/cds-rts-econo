

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>5.3.4. Watchdog Handling &#8212; RuntimeSystemDocumentation V3.5.16.40</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/theme.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.3.5. IEC Task Management" href="ov_kernel_iec_task_mgmt.html" />
    <link rel="prev" title="5.3.3. Application Handling" href="ov_kernel_application_handling.html" /> 
  </head><body>
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ov_kernel_iec_task_mgmt.html" title="5.3.5. IEC Task Management"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ov_kernel_application_handling.html" title="5.3.3. Application Handling"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >5. Architecture Manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="overview_kernel.html" accesskey="U">5.3. Overview of the Kernel Components and Main Functions</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="ov_kernel_application_handling.html"
                        title="previous chapter">5.3.3. Application Handling</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="ov_kernel_iec_task_mgmt.html"
                        title="next chapter">5.3.5. IEC Task Management</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="watchdog-handling">
<span id="ov-kernel-watchdog-handling"></span><h1>5.3.4. Watchdog Handling<a class="headerlink" href="#watchdog-handling" title="Permalink to this headline">¶</a></h1>
<p>All IEC-tasks of an application can be supervised by the runtime system
to avoid cycle time overruns. The watchdog function can be enabled and
configured in the task configuration of the PLC application. The task
will be terminated with error status (“Exception”), when the currently
set watchdog “Time” gets exceeded, whereby the currently set
“Sensitivity” is included. Two cases are possible:</p>
<ol class="arabic">
<li><p>Contiguous time overruns; the following is true:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 38%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Sensitivity</p></th>
<th class="head"><p>Exception in cycle …</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0,1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-even"><td><p>…</p></td>
<td><p>…</p></td>
</tr>
<tr class="row-odd"><td><p>n</p></td>
<td><p>N</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p>Single time overrun: Exception if the cycle time for the current
cycle is greater than (Time * Sensitivity). Example:
Time=t#10ms, Sensitivity=5 -&gt; Exception as soon as the task
(once) runs longer than 50ms. This serves to detect endless loops
in the first cycle.</p></li>
</ol>
<p>If the watchdog expires, the outputs are reset to its default values, if
in the device dialog of the PLC application the entry “IO update while
in stop” and “set outputs to default values” is specified.</p>
<p>By use of the library function in CmpIecTask.library a watchdog may be
suspended for particular PLC cycles; this may be helpful for cycles
requiring an extra amount of time due to initialization processes.</p>
<p>Having declared an appropriate variable of type RTS_IEC_HANDLE to
handle the task</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="nl">hIecTask</span> <span class="p">:</span> <span class="n">RTS_IEC_HANDLE</span><span class="p">;</span>
</pre></div>
</div>
<p>deactivating and subsequent reactivating of the watchdog can be realized
with help of the interface functions:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="nl">hIecTask</span> <span class="p">:</span><span class="o">=</span> <span class="n">IecTaskGetCurrent</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">IecTaskDisableWatchdog</span><span class="p">(</span><span class="n">hIecTask</span><span class="p">);</span>
<span class="p">...</span> <span class="c1">// Code that is protected against watchdog</span>
<span class="n">IecTaskEnableWatchdog</span><span class="p">(</span><span class="n">hIecTask</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="monitoring">
<h2>5.3.4.1. Monitoring<a class="headerlink" href="#monitoring" title="Permalink to this headline">¶</a></h2>
<p>The monitoring of the IEC variables is always done task-inconsistently.
This is done because here no influence of the IEC tasks on the runtime
can be guaranteed.</p>
<p>But in the future there will be an option to read IEC variables
task-consistently.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ov_kernel_iec_task_mgmt.html" title="5.3.5. IEC Task Management"
             >next</a> |</li>
        <li class="right" >
          <a href="ov_kernel_application_handling.html" title="5.3.3. Application Handling"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >5. Architecture Manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="overview_kernel.html" >5.3. Overview of the Kernel Components and Main Functions</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, 3S-Smart Software Solutions GmbH. This document is confidential. Unauthorized copying, disclosure or distribution of this document and the information contained herein is strictly forbidden.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>