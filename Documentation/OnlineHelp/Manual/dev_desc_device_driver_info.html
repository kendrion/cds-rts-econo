
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1.7.2.4. Driver info &#8212; RuntimeSystemOnlineHelp V3.5.14.0</title>
    
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.14.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="RuntimeSystemOnlineHelp V3.5.14.0" href="../index.html" />
    <link rel="up" title="1.7.2. Device" href="dev_desc_device.html" />
    <link rel="next" title="1.7.2.5. Functional" href="dev_desc_device_functional.html" />
    <link rel="prev" title="1.7.2.3. Device info" href="dev_desc_device_device_info.html" /> 
  </head>
  <body role="document">
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dev_desc_device_functional.html" title="1.7.2.5. Functional"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="dev_desc_device_device_info.html" title="1.7.2.3. Device info"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemOnlineHelp V3.5.14.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >1. CODESYS Control V3 - Manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="device_description.html" >1.7. Device Description</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="dev_desc_device.html" accesskey="U">1.7.2. Device</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">1.7.2.4. Driver info</a><ul>
<li><a class="reference internal" href="#adding-libraries-and-function-blocks">1.7.2.4.1. Adding libraries and function blocks</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="dev_desc_device_device_info.html"
                        title="previous chapter">1.7.2.3. Device info</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dev_desc_device_functional.html"
                        title="next chapter">1.7.2.5. Functional</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Manual/dev_desc_device_driver_info.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dev-driver-info">
<span id="id1"></span><h1>1.7.2.4. <span class="target" id="driver-info">Driver info</span><a class="headerlink" href="#dev-driver-info" title="Permalink to this headline">¶</a></h1>
<p>A device is typically operated by a driver. This is usual for an IO-device, but unusual for a PLC-device.
In this section some general information for the driver can be specified.</p>
<p>Example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;DriverInfo</span> <span class="na">needsBusCycle=</span><span class="s">&quot;false&quot;</span> <span class="na">UpdateIosInStop=</span><span class="s">&quot;true&quot;</span> <span class="na">StopResetBehaviour=</span><span class="s">&quot;SetToDefault&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;RequiredLib</span> <span class="na">libname=</span><span class="s">&quot;IoStandard&quot;</span> <span class="na">vendor=</span><span class="s">&quot;System&quot;</span> <span class="na">version=</span><span class="s">&quot;3.5.11.0&quot;</span> <span class="na">identifier=</span><span class="s">&quot;iostandardlib&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/DriverInfo&gt;</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">XML-Tag</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>needsBusCycle</td>
<td>Specifies, if the device needs a separate bus cycle. If this attribute is TRUE,
the corresponding IO-driver get a cyclic call to is IoDrvStartBusCycle() interface
method. The context of this call can be specified by the user
(see <a class="reference internal" href="io_drivers_interfaces.html#icmpiodrv"><span class="std std-ref">ICmpIoDrv</span></a>)</td>
</tr>
<tr class="row-odd"><td>UpdateIosInStop</td>
<td>If TRUE, the option &#8220;Update IO while in stop&#8221; in dialog &#8220;PLC settings&#8221; of the
device editor will be activated.</td>
</tr>
<tr class="row-even"><td>StopResetBehaviour</td>
<td>Defines the default selection for option &#8220;Update IO while in stop&#8221; in dialog
&#8220;PLC settings&#8221; of the device editor.</td>
</tr>
<tr class="row-odd"><td>RequiredLib</td>
<td>Defines a library that is added when a device is added in the project.
The IO standard is required by the IO configuration and must be compatible with
the controller implementation.
An IoStandard.library for the device must therefore be specified here
Instead of a fix library name a library placeholder (attribute &#8220;placeholderlib&#8221;)
can be specified here. This will effect that, when the device is included to the
project, each the currently available corresponding customer-specific library
will be included.</td>
</tr>
<tr class="row-even"><td>defaultBusCycleTask</td>
<td>Defines the default bus cycle task; example: defaultBusCycleTask=&#8221;MainTask&#8221;
Note: This setting overwrites a possibly available &#8220;useSlowestTask&#8221; resp. the
basic default setting (=task with the shortest cycle time will be used as bus
cycle task).</td>
</tr>
<tr class="row-odd"><td>useSlowestTask</td>
<td>If TRUE, the task with the longest cycle time will be used as bus cycle task.
Otherwise the task with the shortest cycle time or – if defined –
the &#8220;defaultBusCycleTask&#8221; (see above) will be used.</td>
</tr>
<tr class="row-even"><td><p class="first">RequiredCyclicTask</p>
<p class="last">taskpou</p>
</td>
<td><p class="first">Specifies a cyclic task which shall automatically be added to the
Task Configuration, when the device is inserted in the device tree. The task is
defined by the attributes &#8220;taskname&#8221; and &#8220;priority&#8221;, see example below.</p>
<p>Setting &#8220;taskpou&#8221; allows to specify a POU, which should be added to the
configuration of the above defined task. Regard that this only means, that the
POU name will be entered in the task configuration, not however that the POU
itself will be created in the project !</p>
<p>Example:</p>
<div class="last line-block">
<div class="line">&lt;RequiredCyclicTask taskname=&#8221;Ethercat&#8221; priority=&#8221;2&#8221; cycletime=&#8221;t#6ms&#8221;&gt;</div>
<div class="line-block">
<div class="line">&lt;taskpou&gt;Test_Pou1&lt;/taskpou&gt;</div>
<div class="line">&lt;taskpou&gt;Test_Pou2&lt;/taskpou&gt;</div>
</div>
<div class="line">&lt;/RequiredCyclicTask&gt;</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p class="first">RequiredExternalEventTask</p>
<p class="last">taskpou</p>
</td>
<td><p class="first">Corresponds to the above described &#8220;RequiredCyclicTask&#8221; setting; for automatically
adding an external event task to the task configuration when inserting the device</p>
<p>Example:</p>
<div class="last line-block">
<div class="line">&lt;RequiredExternalEventTask taskname=&#8221;EthercatEvent&#8221; priority=&#8221;2&#8221;&gt;</div>
<div class="line-block">
<div class="line">&lt;taskpou&gt;Test_Pou3&lt;/taskpou&gt;</div>
<div class="line">&lt;taskpou&gt;Test_Pou4&lt;/taskpou&gt;</div>
</div>
<div class="line">&lt;/RequiredExternalEventTask&gt;</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For complete documentation on the particular device description elements see the xsd schema provided by <span class="xref std std-ref">device_description_schema</span>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If libraries, having the same library name and vendor name,
are requested by a father object as well as by a child object (a child
object is an object indented below the father object in the device
tree), only that library version will be included which is requested by
the father object.</p>
</div>
<div class="section" id="adding-libraries-and-function-blocks">
<h2>1.7.2.4.1. Adding libraries and function blocks<a class="headerlink" href="#adding-libraries-and-function-blocks" title="Permalink to this headline">¶</a></h2>
<p>Example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;DriverInfo</span> <span class="na">needsBusCycle=</span><span class="s">&quot;false&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;RequiredLib</span> <span class="na">identifier=</span><span class="s">&quot;IoDrvSercos3&quot;</span> <span class="na">libname=</span><span class="s">&quot;IoDrvSercos3&quot;</span> <span class="na">placeholderlib=</span><span class="s">&quot;IoDrvSercos3&quot;</span> <span class="na">vendor=</span><span class="s">&quot;CODESYS GmbH&quot;</span> <span class="na">version=</span><span class="s">&quot;3.1.2.0&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;FBInstance</span> <span class="na">basename=</span><span class="s">&quot;$(DeviceName)&quot;</span> <span class="na">fbname=</span><span class="s">&quot;Sercos3Slave&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;Initialize</span> <span class="na">methodName=</span><span class="s">&quot;Initialize&quot;</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/FBInstance&gt;</span>
    <span class="nt">&lt;/RequiredLib&gt;</span>
<span class="nt">&lt;/DriverInfo&gt;</span>
</pre></div>
</div>
<p>With the DriverInfo and RequiredLib elements it is possible to get
libraries added to the project automatically as soon as the user adds a
specific device in the configuration tree. The library is selected by
libname, vendor and version and must match with the information from the
library file.</p>
<p>The identifier element selects the namespace as it is shown in the
library manager of the project.</p>
<p>With the element placeholderlib an unique name is defined. The
placeholder itself is defined in the device description of the PLC in
the target settings section and it will override the libname, vendor and
version attribute. Optionally an attribute
&#8220;loadAsSystemLibrary=true|false&#8221; can be added: If it is &#8220;false&#8221;, the
library will be inserted as a &#8220;normal&#8221; library (black writing). If it is
&#8220;true&#8221; (default) or missing, the library will be inserted as a &#8220;system
library&#8221; (grey writing).</p>
<p>With this placeholder mechanism it is possible to select a specific
library version by only changing the PLC device description. All other
description files (master, slaves) do not need to be changed.</p>
<p>The FBInstance entry effects that automatically a function block will be
created for each device. The basename $(DeviceName) will be replaced by
the actual device name in the device tree. Also combinations like
$(DeviceName)_abc are possible. It the device is renamed in the device
tree for example to &#8220;Drive1&#8221; then the function block will be named
Drive1_abc.</p>
<p>With &#8220;Initialize&#8221; a special method could be declared, which will be
called automatically when downloading the project.</p>
<p>The declaration for the Initialize method must be exactly as follows:</p>
<div class="highlight-C"><div class="highlight"><pre><span></span><span class="n">METHOD</span> <span class="nl">Initialize</span> <span class="p">:</span> <span class="n">UDINT</span>
<span class="n">VAR_INPUT</span>
    <span class="nl">wModuleType</span> <span class="p">:</span> <span class="n">UINT</span><span class="p">;</span>
    <span class="nl">dwInstance</span> <span class="p">:</span> <span class="n">UDINT</span><span class="p">;</span>
    <span class="nl">pConnector</span> <span class="p">:</span> <span class="n">POINTER</span> <span class="n">TO</span> <span class="n">IoConfigConnector</span><span class="p">;</span>
<span class="n">END_VAR</span>
</pre></div>
</div>
<p>For complete documentation see the information given by the xsd schema.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dev_desc_device_functional.html" title="1.7.2.5. Functional"
             >next</a> |</li>
        <li class="right" >
          <a href="dev_desc_device_device_info.html" title="1.7.2.3. Device info"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemOnlineHelp V3.5.14.0</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >1. CODESYS Control V3 - Manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="device_description.html" >1.7. Device Description</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="dev_desc_device.html" >1.7.2. Device</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, 3S-Smart Software Solutions GmbH.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>