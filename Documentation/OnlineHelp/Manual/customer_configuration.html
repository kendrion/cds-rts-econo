

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>5.10.2. Configuration &#8212; RuntimeSystemDocumentation V3.5.16.40</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/theme.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5.10.3. Implementing own components" href="customer_impl_own_components.html" />
    <link rel="prev" title="5.10.1. Versions" href="customer_versions.html" /> 
  </head><body>
	<div id="header">
		<a href="#" title="CODESYS" target="_top" id="logo"><img src="../_static/logo.png" width="134" height="130" alt=""></a>
		<a href="#" title="CODESYS Documentation" target="_top" id="logo-store"><img src="../_static/logo2.png" width="137" height="130" alt=""></a>
	</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="customer_impl_own_components.html" title="5.10.3. Implementing own components"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="customer_versions.html" title="5.10.1. Versions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >5. Architecture Manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="customer.html" accesskey="U">5.10. Customer Adaptations and Expansions</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="customer_versions.html"
                        title="previous chapter">5.10.1. Versions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="customer_impl_own_components.html"
                        title="next chapter">5.10.3. Implementing own components</a></p>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration">
<span id="customer-configuration"></span><h1>5.10.2. Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>The runtime system is configured at compile time via pre-processor
defines. The following adjustments can be made via the defines:</p>
<ul class="simple">
<li><p>Link type of the runtime system (static, dynamic, mixed or C++)</p></li>
<li><p>Choice of components</p></li>
<li><p>Static configuration of components</p></li>
</ul>
<p>The required defines can be set in the workspace itself or in the file
“sysdefines.h”.</p>
<div class="section" id="link-type-of-the-runtime-system">
<h2>5.10.2.1. Link type of the runtime system<a class="headerlink" href="#link-type-of-the-runtime-system" title="Permalink to this headline">¶</a></h2>
<p>The runtime system can be linked in several ways. The runtime system can
be configured in static or dynamic mode. Static configuration is
implemented at compile time and cannot be modified afterwards. In
contrast to static configuration, dynamic configuration is implemented
at runtime and can be modified at each restart.</p>
<p>Because the M4 mechanism is used for creating the header files and
macros are used for calling functions, no code changes are required for
switching between different types.</p>
<ol class="arabic">
<li><p>Static:
If the “STATIC_LINK” define is set, all components are linked
statically and the result is an executable file. It is then no longer
possible to load components such as certain IO drivers. All
components to be used must be available at compile time. If a
component is changed the whole runtime system has to be rebuilt.
This link type is particularly useful for embedded systems that offer
no option for reloading modules dynamically.</p></li>
<li><p>„Mixed”:
If the “MIXED_LINK” define is set, core components are statically
linked to an executable file, while further modules can be
dynamically reloaded as required. Which files are linked statically
is specified in the make file or in the workspace.
In this way it is possible to make a basic system available while
dynamically loading certain optional components such as IO drivers.</p></li>
<li><p>C++:
If the “CPLUSPLUS” define is set, the result is a runtime system in
C++.</p></li>
<li><p>Dynamic:
Without one of the defines mentioned above, the runtime system is
linked dynamically. The executable file only contains the component
manager. All components are dynamically reloaded.</p>
<p>The result is a system with maximum flexibility. Only components that
are actually required have to be loaded. If a component changes only
an individual module has to be replaced, not the whole runtime
system.</p>
</li>
</ol>
</div>
<div class="section" id="choice-of-components">
<h2>5.10.2.2. Choice of components<a class="headerlink" href="#choice-of-components" title="Permalink to this headline">¶</a></h2>
<p>The choice of components may differ from system to system and can be
adapted individually. This is a significant advantage of strict
separation of modules in individual components.</p>
<p>Once components have been selected the component manager must be
notified. In mixed and statically linked runtime systems a preselection
is made in the make file or in the workspace, although an explicit list
of components to be loaded still has to be transferred to the components
manager. In this context it is important that all statically linked
components are included in the load list of the component manager.</p>
<p>The load list of the component manager consists of three different
lists. Each component only has to be listed in one of the three lists in
order to be loaded.</p>
<p>List of system components:</p>
<p>The component manager defines certain components as system components
required for its own tasks. These components have to be included in each
runtime system.</p>
<ul class="simple">
<li><p>CmpMgr</p></li>
<li><p>SysMem</p></li>
<li><p>SysOut</p></li>
<li><p>SysFile</p></li>
<li><p>SysSem</p></li>
<li><p>SysTime</p></li>
<li><p>CmpLog</p></li>
<li><p>CmpSettings</p></li>
<li><p>CmpMemPool</p></li>
<li><p>CmpChecksum</p></li>
</ul>
<p>In the interest of uniform logging the component manager itself is also
treated as a component.</p>
<p>Static list:</p>
<p>For mixed and statically linked runtime systems it is useful to specify
a static list of components. This list should include all components
that were statically linked. The static list is transferred to the
CMInit function, which is called from the main routine as standard.</p>
<p>An example:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">StaticComponent</span> <span class="n">s_ComponentList</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
 <span class="p">{</span><span class="s">&quot;CmpApp&quot;</span><span class="p">,</span> <span class="n">CmpApp__Entry</span><span class="p">},</span>
 <span class="p">{</span><span class="s">&quot;CmpBlkDrvUdp&quot;</span><span class="p">,</span> <span class="n">CmpBlkDrvUdp__Entry</span><span class="p">},</span> <span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
 <span class="p">{</span><span class="s">&quot;SysTime&quot;</span><span class="p">,</span> <span class="n">SysTime__Entry</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">}</span>
<span class="p">};</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">__argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">__argv</span><span class="p">[])</span>
<span class="p">{</span>
 <span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
 <span class="n">CMInit</span><span class="p">(</span><span class="n">s_szComponentFile</span><span class="p">,</span> <span class="n">s_ComponentList</span><span class="p">);</span>
 <span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
</pre></div>
</div>
<p>Dynamic list:</p>
<p>Lastly, the list of components to be loaded later can be read via the
settings component. This is particularly useful for modules to be
dynamically reloaded.</p>
<p>Example: configuration file (CFG-file):</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ComponentManager</span><span class="p">]</span>
<span class="n">Component</span><span class="mf">.1</span><span class="o">=</span><span class="n">SysTask</span>
<span class="n">Component</span><span class="mf">.2</span><span class="o">=</span><span class="n">SysSem</span>
<span class="n">Component</span><span class="mf">.3</span><span class="o">=</span><span class="n">SysEvent</span>
<span class="n">Component</span><span class="mf">.4</span><span class="o">=</span><span class="n">SysCom</span>
<span class="n">Component</span><span class="mf">.5</span><span class="o">=</span><span class="n">SysSocket</span>
<span class="n">Component</span><span class="mf">.6</span><span class="o">=</span><span class="n">SysOut</span>
<span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
</pre></div>
</div>
</div>
<div class="section" id="static-configuration-of-components">
<h2>5.10.2.3. Static configuration of components<a class="headerlink" href="#static-configuration-of-components" title="Permalink to this headline">¶</a></h2>
<p>Each component can have specific pre-processor defines for different
component parameters (e.g. buffer sizes). The defines are assigned a
default value in the interface header file.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="cp">#ifndef APPL_NUM_OF_STATIC_APPLS</span>
<span class="cp">#define APPL_NUM_OF_STATIC_APPLS 8</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p>Defines can be changed at compile time by assigning a new value in file
sysdefines.h.</p>
<blockquote>
<div><p>#define APPL_NUM_OF_STATIC_APPLS 4</p>
</div></blockquote>
<p>A description of the defines for a particular component can be found in
the interface header file of the component.</p>
</div>
<div class="section" id="dynamic-configuration-cmpsettings">
<h2>5.10.2.4. Dynamic configuration (CmpSettings)<a class="headerlink" href="#dynamic-configuration-cmpsettings" title="Permalink to this headline">¶</a></h2>
<p>Depending on the system the setting component may use a different
backend for reading the setting from a medium. The following backends
are currently available:</p>
<ul class="simple">
<li><p>Configuration via an INI file</p></li>
<li><p>Configuration via the registry</p></li>
<li><p>Static configuration with compiled values (mainly for embedded applications)</p></li>
<li><p>In addition to static configuration there is the option to read in a
dynamic configuration via the setting component. This can be
modified with each restart.</p></li>
</ul>
<p>Users always have the option of implementing their own backend for
supporting an additional medium.</p>
<p>Since the INI file is the most frequently used backend, the following
examples are based on the INI notation.</p>
<p>The whole configuration is subdivided into blocks. Each block is
allocated to a component. The block contains the settings for the
component. The following notation is used throughout:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Component</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;=&lt;</span><span class="n">Value</span>
</pre></div>
</div>
<p>A list of runtime system settings is shown below, arranged by
components. All settings and their description can also be found in the
interface header file of a component.</p>
<ul>
<li><p>Component Manager</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ComponentManager</span><span class="p">]</span>
<span class="n">Component</span><span class="mf">.1</span><span class="o">=</span><span class="n">SysTask</span>
<span class="n">Component</span><span class="mf">.2</span><span class="o">=</span><span class="n">SysSem</span>
<span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
</pre></div>
</div>
</li>
</ul>
<p>List of components to be load:</p>
<ul>
<li><p>Router</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CmpRouter</span><span class="p">]</span>
<span class="n">NumRouters</span><span class="o">=</span><span class="mi">1</span>            <span class="c1">//Number of routers</span>
<span class="mf">0.</span><span class="n">MainNet</span><span class="o">=</span><span class="n">ether</span> <span class="mi">0</span>       <span class="c1">//Main net, where the first router is inserted</span>
<span class="mf">0.</span><span class="n">Subnet</span><span class="mf">.0</span><span class="p">.</span><span class="n">Interface</span><span class="o">=</span><span class="n">COM</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span> <span class="c1">//First subnet of first router; here &quot;Com1&quot;</span>
</pre></div>
</div>
</li>
<li><p>Block Driver UDP</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CmpBlkDrvUdp</span><span class="p">]</span>
<span class="n">itf</span><span class="mf">.0</span><span class="p">.</span><span class="n">ipaddress</span><span class="o">=</span><span class="mf">192.168.100.27</span>  <span class="c1">//fix IP address of network interface</span>
<span class="n">itf</span><span class="mf">.0</span><span class="p">.</span><span class="n">name</span><span class="o">=</span><span class="n">main</span>                 <span class="c1">//Interface name</span>
<span class="n">itf</span><span class="mf">.0</span><span class="p">.</span><span class="n">networkmask</span><span class="o">=</span><span class="mf">255.255.255.0</span> <span class="c1">//Interface subnet mask</span>
<span class="n">itf</span><span class="mf">.0</span><span class="p">.</span><span class="n">portindex</span><span class="o">=</span><span class="mi">1</span>                           <span class="c1">//Fix port for CODESYS  addresses 0-3 (1740-1743)</span>
<span class="n">itf</span><span class="mf">.1</span><span class="p">.</span><span class="n">ipaddress</span><span class="o">=</span><span class="mf">192.168.0.1</span>         <span class="c1">//Example of second interface</span>
<span class="n">itf</span><span class="mf">.1</span><span class="p">.</span><span class="n">name</span><span class="o">=</span><span class="n">vxwin</span>
<span class="n">itf</span><span class="mf">.1</span><span class="p">.</span><span class="n">networkmask</span><span class="o">=</span><span class="mf">255.255.255.0</span>
</pre></div>
</div>
</li>
<li><p>Block Driver Seriell</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CmpBlkDrvSimpleCom</span><span class="p">]</span>
<span class="n">Baudrate</span><span class="o">=</span><span class="mi">57600</span>              <span class="c1">//Baudrate of serial interface</span>
<span class="n">ComPort</span><span class="o">=</span><span class="mi">1</span>                   <span class="c1">//Port number of interface</span>
<span class="n">HalfDuplexAutoNegotiate</span><span class="o">=</span><span class="mi">1</span>   <span class="c1">//RS485 half duplex mode</span>
<span class="n">EnableRtsToggleHandshake</span><span class="o">=</span><span class="mi">1</span>  <span class="c1">//Currently only used to set the RTS_CONTROL_TOGGLE handshake on</span>
                                <span class="c1">//MS Windows based systems. This is needed for some externals</span>
                                                            <span class="c1">//RS232/RS485 adapters to switch the data direction on the (half-duplex) line.v</span>
<span class="n">EnableAutoAddressing</span>                <span class="c1">//Enable the auto addressing feature</span>
</pre></div>
</div>
</li>
<li><p>Application</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CmpApp</span><span class="p">]</span>
<span class="n">CreateBootprojectOnDownload</span><span class="o">=</span><span class="mi">0</span>           <span class="c1">//Creation of a bootproject at download</span>
<span class="n">StoreBootprojectOnlyOnDownload</span><span class="o">=</span><span class="mi">0</span>    <span class="c1">//Creation of a bootproject only at download</span>
<span class="n">PersistentForce</span><span class="o">=</span><span class="mi">0</span>                               <span class="c1">//Persistent Forcing</span>
<span class="n">Application</span><span class="mf">.1</span><span class="o">=</span><span class="n">Application</span>               <span class="c1">//Name of first boot application</span>
<span class="n">Application</span><span class="mf">.2</span><span class="o">=</span><span class="n">BootApp2</span>                          <span class="c1">//Name of second boot application</span>
<span class="n">RetainType</span><span class="p">.</span><span class="n">Applications</span><span class="o">=</span><span class="n">OnPowerfail</span> <span class="c1">//Retain type: None, OnPowerfail, InSRAM</span>
</pre></div>
</div>
</li>
<li><p>Scheduler</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CmpSchedule</span><span class="p">]</span>
<span class="n">EnableLogger</span><span class="o">=</span><span class="mi">1</span>                      <span class="c1">//Activation of a logger for the scheduler</span>
<span class="n">MaxProcessorLoad</span><span class="o">=</span><span class="mi">80</span>                 <span class="c1">//Maximum load of CPU</span>
<span class="n">Timeslicing</span><span class="p">.</span><span class="n">Mode</span><span class="o">=</span><span class="n">Internal</span>           <span class="c1">//Timeslicing Mode:</span>
                                    <span class="c1">//NONE: no timeslicing (default) behavior: internal timeslicing</span>
                                    <span class="c1">//EXTERNAL: external timeslicing</span>
<span class="n">Timelicing</span><span class="p">.</span><span class="n">PlcSlicePercent</span><span class="o">=</span><span class="mi">80</span>               <span class="c1">//time slice of PLC in percents</span>
<span class="n">Timelicing</span><span class="p">.</span><span class="n">PlcSliceUs</span><span class="o">=</span><span class="mi">4000</span>                  <span class="c1">//time slice of PLC in Us</span>
<span class="n">Timelicing</span><span class="p">.</span><span class="n">StartOnProcessorLoad</span><span class="o">=</span><span class="mi">1</span>   <span class="c1">//Timeslicing depending on maximum processor load</span>
<span class="n">SchedulerPriority</span><span class="o">=</span><span class="mi">5</span>                 <span class="c1">//Priority of scheduler</span>
<span class="n">SchedulerInterval</span><span class="o">=</span><span class="mi">1000</span>                              <span class="c1">//Interval of schedulers in Us</span>
</pre></div>
</div>
</li>
<li><p>Logger</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CmpLog</span><span class="p">]</span>
<span class="n">Logger</span><span class="mf">.0</span><span class="p">.</span><span class="n">Name</span><span class="o">=</span><span class="n">StdLogger</span>           <span class="c1">//Name of first Logger</span>
<span class="n">Logger</span><span class="mf">.0</span><span class="p">.</span><span class="n">Enable</span><span class="o">=</span><span class="mi">1</span>                 <span class="c1">//activation of logger</span>
<span class="n">Logger</span><span class="mf">.0</span><span class="p">.</span><span class="n">MaxEntries</span><span class="o">=</span><span class="mi">1000</span>          <span class="c1">//Maximum number of log entries in internal queue</span>
<span class="n">Logger</span><span class="mf">.0</span><span class="p">.</span><span class="n">MaxFileSize</span><span class="o">=</span><span class="mi">5000</span>         <span class="c1">//Maximum file size</span>
<span class="n">Logger</span><span class="mf">.0</span><span class="p">.</span><span class="n">MaxFiles</span><span class="o">=</span><span class="mi">3</span>               <span class="c1">//Number of log files</span>
<span class="n">Logger</span><span class="mf">.0</span><span class="p">.</span><span class="n">Backend</span><span class="mf">.0</span><span class="p">.</span><span class="n">ClassId</span><span class="o">=</span><span class="mh">0x010B</span> <span class="c1">//ClassId of first backend</span>
<span class="n">Logger</span><span class="mf">.0</span><span class="p">.</span><span class="n">Backend</span><span class="mf">.1</span><span class="p">.</span><span class="n">ClassId</span><span class="o">=</span><span class="mh">0x0104</span> <span class="c1">//ClassId of second backend</span>
                                  <span class="c1">//Ids read from CmpItf.h</span>
<span class="n">Logger</span><span class="mf">.1</span><span class="p">.</span><span class="n">Name</span><span class="o">=</span><span class="n">CommLog</span>             <span class="c1">//Name of second logger</span>
<span class="n">Logger</span><span class="mf">.1</span><span class="p">.</span><span class="n">Enable</span><span class="o">=</span><span class="mi">1</span>                 <span class="c1">//etc.</span>
</pre></div>
</div>
</li>
<li><p>Retain</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CmpRetain</span><span class="p">]</span>
<span class="n">Retain</span><span class="p">.</span><span class="n">SRAM</span><span class="p">.</span><span class="n">Address</span><span class="o">=</span><span class="mh">0x10000000</span> <span class="c1">//Physical start address SRAM</span>
<span class="n">Retain</span><span class="p">.</span><span class="n">SRAM</span><span class="p">.</span><span class="n">Size</span> <span class="c1">//Größe SRAM</span>
</pre></div>
</div>
</li>
</ul>
<p>In addition to general settings, the components of the system adaptation
interface may also have system-dependent settings. These settings are
identified by separate abbreviations in the key</p>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">component</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">shortcut</span> <span class="n">of</span> <span class="n">the</span> <span class="n">customization</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">Key</span><span class="o">&gt;=&lt;</span><span class="n">Value</span><span class="o">&gt;</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>Files</p></li>
</ul>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SysFile</span><span class="p">]</span>
<span class="n">FilePath</span><span class="mf">.1</span><span class="o">=</span><span class="p">.</span><span class="o">/</span><span class="n">Boot</span><span class="p">,</span> <span class="o">*</span><span class="p">.</span><span class="n">app</span><span class="p">,</span> <span class="o">*</span><span class="p">.</span><span class="n">ap_</span>   <span class="c1">//files with extension app or ap_ are stored in //folder ./Boot</span>
<span class="n">FilePath</span><span class="mf">.2</span><span class="o">=</span><span class="p">.</span><span class="o">/</span><span class="n">var</span><span class="p">,</span> <span class="o">*</span><span class="p">.</span><span class="n">ret</span><span class="p">,</span> <span class="o">*</span><span class="p">.</span><span class="n">frc</span>    <span class="c1">//files (*.ret, *.frc) are stored in ./var</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>Timer</p></li>
</ul>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SysTimer</span><span class="p">]</span>
<span class="n">VxWorks</span><span class="p">.</span><span class="n">TimerSource</span><span class="o">=</span><span class="n">Auxiliary</span> <span class="c1">//Timersource of scheduler</span>
                              <span class="c1">//Auxiliary: Auxiliary-Clock</span>
                              <span class="c1">//System: System-Clock</span>
                              <span class="c1">//default: high prior task</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>Interrupt</p></li>
</ul>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SysInt</span><span class="p">]</span>
<span class="n">WinCE</span><span class="p">.</span><span class="n">UseIRQSysIntrMapping</span><span class="o">=</span><span class="mi">1</span>  <span class="c1">//Mapping of an IRQ on a system IRQ</span>
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>Shared Memory</p></li>
</ul>
<blockquote>
<div><div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">SysShm</span><span class="p">]</span>
<span class="n">WinCE</span><span class="p">.</span><span class="n">MapPhysical</span><span class="o">=</span><span class="mi">1</span>          <span class="c1">//setting flag MapPhysical</span>
<span class="n">WinCE</span><span class="p">.</span><span class="n">DividePhysicalAddressBy</span><span class="o">=</span><span class="mi">256</span> <span class="c1">//calculation of physical address</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="typical-configurations-of-the-codesys-control-winv3-runtime-system">
<h2>5.10.2.5. Typical configurations of the CODESYS Control WinV3 runtime system<a class="headerlink" href="#typical-configurations-of-the-codesys-control-winv3-runtime-system" title="Permalink to this headline">¶</a></h2>
<p>There are the following typical configurations of the CODESYS Control
Win V3 runtime system:</p>
<ul class="simple">
<li><p>Single tasking systems (embedded)</p></li>
<li><p>Timer based systems.</p></li>
<li><p>Multi tasking systems (full)</p></li>
</ul>
</div>
<div class="section" id="embedded-runtime-system">
<h2>5.10.2.6. Embedded Runtime System<a class="headerlink" href="#embedded-runtime-system" title="Permalink to this headline">¶</a></h2>
<p>An “embedded runtime” we call a system that typically has only one main
loop for the execution of all tasks in the runtime system
(communication, IEC tasks, etc.). For this kind of runtime system, a
minimal system is sufficient.</p>
<p>For this type of runtime system, the configuration can be the following:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">ComponentManager</span><span class="p">]</span>
<span class="n">Component</span><span class="mf">.1</span><span class="o">=</span><span class="n">CmpIecTask</span>
<span class="n">Component</span><span class="mf">.2</span><span class="o">=</span><span class="n">CmpMgr</span>
<span class="n">Component</span><span class="mf">.3</span><span class="o">=</span><span class="n">CmpEventMgr</span>
<span class="n">Component</span><span class="mf">.4</span><span class="o">=</span><span class="n">SysMem</span>
<span class="n">Component</span><span class="mf">.5</span><span class="o">=</span><span class="n">CmpSettings</span>
<span class="n">Component</span><span class="mf">.6</span><span class="o">=</span><span class="n">CmpChannelServer</span>
<span class="n">Component</span><span class="mf">.7</span><span class="o">=</span><span class="n">SysExcept</span>
<span class="n">Component</span><span class="mf">.8</span><span class="o">=</span><span class="n">CmpMemPool</span>
<span class="n">Component</span><span class="mf">.9</span><span class="o">=</span><span class="n">CmpChecksum</span>
<span class="n">Component</span><span class="mf">.10</span><span class="o">=</span><span class="n">CmpAddrSrvc</span>
<span class="n">Component</span><span class="mf">.11</span><span class="o">=</span><span class="n">SysFile</span>
<span class="n">Component</span><span class="mf">.12</span><span class="o">=</span><span class="n">SysTime</span>
<span class="n">Component</span><span class="mf">.13</span><span class="o">=</span><span class="n">CmpMonitor</span>
<span class="n">Component</span><span class="mf">.14</span><span class="o">=</span><span class="n">CmpBinTagUtil</span>
<span class="n">Component</span><span class="mf">.15</span><span class="o">=</span><span class="n">SysShm</span>
<span class="n">Component</span><span class="mf">.16</span><span class="o">=</span><span class="n">CmpLog</span>
<span class="n">Component</span><span class="mf">.17</span><span class="o">=</span><span class="n">SysSocket</span>
<span class="n">Component</span><span class="mf">.18</span><span class="o">=</span><span class="n">CmpChannelMgr</span>
<span class="n">Component</span><span class="mf">.19</span><span class="o">=</span><span class="n">CmpRouter</span>
<span class="n">Component</span><span class="mf">.20</span><span class="o">=</span><span class="n">CmpSrv</span>
<span class="n">Component</span><span class="mf">.21</span><span class="o">=</span><span class="n">SysCpuHandling</span>
<span class="n">Component</span><span class="mf">.22</span><span class="o">=</span><span class="n">CmpRetain</span>
<span class="n">Component</span><span class="mf">.23</span><span class="o">=</span><span class="n">CmpCommunicationLib</span>
<span class="n">Component</span><span class="mf">.24</span><span class="o">=</span><span class="n">CmpScheduleEmbedded</span>
<span class="n">Component</span><span class="mf">.25</span><span class="o">=</span><span class="n">CmpBlkDrvUdp</span>
<span class="n">Component</span><span class="mf">.26</span><span class="o">=</span><span class="n">CmpApp</span>
</pre></div>
</div>
<div class="section" id="timer-runtime-system">
<h3>Timer runtime system<a class="headerlink" href="#timer-runtime-system" title="Permalink to this headline">¶</a></h3>
<p>The timer runtime uses processor timers to operate separate cyclic
tasks. This is typically used on small embedded controllers with several
timers. The behavior is much better than the embedded runtime, because
for example, the communication has no influence on some higher priority
tasks (IEC tasks), because the communication is done in the main
(background) loop and the higher priority tasks are executed in the
timer interrupts.</p>
<p>For this type of runtime system, the configuration can be the following:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ComponentManager</span><span class="p">]</span>
<span class="n">Component</span><span class="mf">.1</span><span class="o">=</span><span class="n">CmpIecTask</span>
<span class="n">Component</span><span class="mf">.2</span><span class="o">=</span><span class="n">SysEvent</span>
<span class="n">Component</span><span class="mf">.3</span><span class="o">=</span><span class="n">CmpMgr</span>
<span class="n">Component</span><span class="mf">.4</span><span class="o">=</span><span class="n">CmpEventMgr</span>
<span class="n">Component</span><span class="mf">.5</span><span class="o">=</span><span class="n">SysMem</span>
<span class="n">Component</span><span class="mf">.6</span><span class="o">=</span><span class="n">CmpSettings</span>
<span class="n">Component</span><span class="mf">.7</span><span class="o">=</span><span class="n">CmpChannelServer</span>
<span class="n">Component</span><span class="mf">.8</span><span class="o">=</span><span class="n">CmpScheduleTimer</span>
<span class="n">Component</span><span class="mf">.9</span><span class="o">=</span><span class="n">SysExcept</span>
<span class="n">Component</span><span class="mf">.10</span><span class="o">=</span><span class="n">SysTimer</span>
<span class="n">Component</span><span class="mf">.11</span><span class="o">=</span><span class="n">CmpMemPool</span>
<span class="n">Component</span><span class="mf">.12</span><span class="o">=</span><span class="n">CmpChecksum</span>
<span class="n">Component</span><span class="mf">.13</span><span class="o">=</span><span class="n">CmpAddrSrvc</span>
<span class="n">Component</span><span class="mf">.14</span><span class="o">=</span><span class="n">SysFile</span>
<span class="n">Component</span><span class="mf">.15</span><span class="o">=</span><span class="n">SysTime</span>
<span class="n">Component</span><span class="mf">.16</span><span class="o">=</span><span class="n">CmpMonitor</span>
<span class="n">Component</span><span class="mf">.17</span><span class="o">=</span><span class="n">CmpBinTagUtil</span>
<span class="n">Component</span><span class="mf">.18</span><span class="o">=</span><span class="n">SysShm</span>
<span class="n">Component</span><span class="mf">.19</span><span class="o">=</span><span class="n">CmpLog</span>
<span class="n">Component</span><span class="mf">.20</span><span class="o">=</span><span class="n">SysSocket</span>
<span class="n">Component</span><span class="mf">.21</span><span class="o">=</span><span class="n">CmpChannelMgr</span>
<span class="n">Component</span><span class="mf">.22</span><span class="o">=</span><span class="n">CmpRouter</span>
<span class="n">Component</span><span class="mf">.23</span><span class="o">=</span><span class="n">CmpSrv</span>
<span class="n">Component</span><span class="mf">.24</span><span class="o">=</span><span class="n">SysCpuHandling</span>
<span class="n">Component</span><span class="mf">.25</span><span class="o">=</span><span class="n">CmpRetain</span>
<span class="n">Component</span><span class="mf">.26</span><span class="o">=</span><span class="n">CmpCommunicationLib</span>
<span class="n">Component</span><span class="mf">.27</span><span class="o">=</span><span class="n">CmpBlkDrvUdp</span>
<span class="n">Component</span><span class="mf">.28</span><span class="o">=</span><span class="n">CmpApp</span>
</pre></div>
</div>
</div>
<div class="section" id="full-runtime-system">
<h3>Full runtime system<a class="headerlink" href="#full-runtime-system" title="Permalink to this headline">¶</a></h3>
<p>As a full runtime we specified a system that is based on a preemptive
multitasking operating system. Here the various operations can be
executed by tasks with different priorities. So a very fine adjustable
system behavior can be reached. A full runtime contains typically all of
the available features of a CODESYS runtime.</p>
<p>For this type of runtime system, the configuration can be the following:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ComponentManager</span><span class="p">]</span>
<span class="n">Component</span><span class="mf">.1</span><span class="o">=</span><span class="n">CmpIecTask</span>
<span class="n">Component</span><span class="mf">.2</span><span class="o">=</span><span class="n">SysEvent</span>
<span class="n">Component</span><span class="mf">.3</span><span class="o">=</span><span class="n">CmpMgr</span>
<span class="n">Component</span><span class="mf">.4</span><span class="o">=</span><span class="n">CmpEventMgr</span>
<span class="n">Component</span><span class="mf">.5</span><span class="o">=</span><span class="n">SysMem</span>
<span class="n">Component</span><span class="mf">.6</span><span class="o">=</span><span class="n">CmpSettings</span>
<span class="n">Component</span><span class="mf">.7</span><span class="o">=</span><span class="n">CmpChannelServer</span>
<span class="n">Component</span><span class="mf">.8</span><span class="o">=</span><span class="n">SysExcept</span>
<span class="n">Component</span><span class="mf">.9</span><span class="o">=</span><span class="n">CmpMemPool</span>
<span class="n">Component</span><span class="mf">.10</span><span class="o">=</span><span class="n">CmpChecksum</span>
<span class="n">Component</span><span class="mf">.11</span><span class="o">=</span><span class="n">CmpAddrSrvc</span>
<span class="n">Component</span><span class="mf">.12</span><span class="o">=</span><span class="n">SysFile</span>
<span class="n">Component</span><span class="mf">.13</span><span class="o">=</span><span class="n">CmpSchedule</span>
<span class="n">Component</span><span class="mf">.14</span><span class="o">=</span><span class="n">SysTime</span>
<span class="n">Component</span><span class="mf">.15</span><span class="o">=</span><span class="n">CmpMonitor</span>
<span class="n">Component</span><span class="mf">.16</span><span class="o">=</span><span class="n">CmpBinTagUtil</span>
<span class="n">Component</span><span class="mf">.17</span><span class="o">=</span><span class="n">SysShm</span>
<span class="n">Component</span><span class="mf">.18</span><span class="o">=</span><span class="n">CmpLog</span>
<span class="n">Component</span><span class="mf">.19</span><span class="o">=</span><span class="n">SysSocket</span>
<span class="n">Component</span><span class="mf">.20</span><span class="o">=</span><span class="n">CmpChannelMgr</span>
<span class="n">Component</span><span class="mf">.21</span><span class="o">=</span><span class="n">SysTask</span>
<span class="n">Component</span><span class="mf">.22</span><span class="o">=</span><span class="n">CmpRouter</span>
<span class="n">Component</span><span class="mf">.23</span><span class="o">=</span><span class="n">CmpSrv</span>
<span class="n">Component</span><span class="mf">.24</span><span class="o">=</span><span class="n">SysCpuHandling</span>
<span class="n">Component</span><span class="mf">.25</span><span class="o">=</span><span class="n">CmpRetain</span>
<span class="n">Component</span><span class="mf">.26</span><span class="o">=</span><span class="n">CmpCommunicationLib</span>
<span class="n">Component</span><span class="mf">.27</span><span class="o">=</span><span class="n">CmpBlkDrvUdp</span>
<span class="n">Component</span><span class="mf">.28</span><span class="o">=</span><span class="n">CmpApp</span>
</pre></div>
</div>
</div>
<div class="section" id="gateway-runtime-system">
<h3>Gateway runtime system<a class="headerlink" href="#gateway-runtime-system" title="Permalink to this headline">¶</a></h3>
<p>For this type of implicit runtime system, the configuration can be the
following:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">ComponentManager</span><span class="p">]</span>
<span class="n">Component</span><span class="mf">.1</span><span class="o">=</span><span class="n">SysTime</span>
<span class="n">Component</span><span class="mf">.2</span><span class="o">=</span><span class="n">SysTask</span>
<span class="n">Component</span><span class="mf">.3</span><span class="o">=</span><span class="n">SysEvent</span>
<span class="n">Component</span><span class="mf">.4</span><span class="o">=</span><span class="n">SysSem</span>
<span class="n">Component</span><span class="mf">.5</span><span class="o">=</span><span class="n">SysCom</span>
<span class="n">Component</span><span class="mf">.6</span><span class="o">=</span><span class="n">SysSocket</span>
<span class="n">Component</span><span class="mf">.7</span><span class="o">=</span><span class="n">SysExcept</span>
<span class="n">Component</span><span class="mf">.8</span><span class="o">=</span><span class="n">SysShm</span>
<span class="n">Component</span><span class="mf">.9</span><span class="o">=</span><span class="n">SysSemProcess</span>
<span class="n">Component</span><span class="mf">.10</span><span class="o">=</span><span class="n">SysCpuHandling</span>
<span class="n">Component</span><span class="mf">.11</span><span class="o">=</span><span class="n">SysInt</span>
<span class="n">Component</span><span class="mf">.12</span><span class="o">=</span><span class="n">CmpRouter</span>
<span class="n">Component</span><span class="mf">.13</span><span class="o">=</span><span class="n">CmpChannelMgr</span>
<span class="n">Component</span><span class="mf">.14</span><span class="o">=</span><span class="n">CmpChannelClient</span>
<span class="n">Component</span><span class="mf">.15</span><span class="o">=</span><span class="n">CmpBlkDrvUdp</span>
<span class="n">Component</span><span class="mf">.16</span><span class="o">=</span><span class="n">CmpAddrSrvc</span>
<span class="n">Component</span><span class="mf">.17</span><span class="o">=</span><span class="n">CmpGateway</span>
<span class="n">Component</span><span class="mf">.18</span><span class="o">=</span><span class="n">CmpGwCommDrvTcp</span>
<span class="n">Component</span><span class="mf">.19</span><span class="o">=</span><span class="n">CmpNameServiceClient</span>
<span class="n">Component</span><span class="mf">.20</span><span class="o">=</span><span class="n">CmpCommunicationLib</span>
<span class="n">Component</span><span class="mf">.21</span><span class="o">=</span><span class="n">CmpBlkDrvShm</span>
<span class="p">[</span><span class="n">CmpRouter</span><span class="p">]</span>
<span class="n">EnableParallelRouting</span><span class="o">=</span><span class="mi">1</span>
<span class="mf">0.</span><span class="n">MainNet</span><span class="o">=</span><span class="n">ether</span> <span class="n">x</span>
<span class="mf">0.</span><span class="n">NumSubNets</span><span class="o">=</span><span class="mi">1</span>
<span class="mf">0.</span><span class="n">SubNet</span><span class="mf">.0</span><span class="p">.</span><span class="n">Interface</span><span class="o">=</span><span class="n">BlkDrvShm</span>
<span class="p">[</span><span class="n">CmpGwCommDrvTcp</span><span class="p">]</span>
<span class="n">ListenPort</span><span class="o">=</span><span class="mi">1217</span>
</pre></div>
</div>
</div>
<div class="section" id="visualization-runtime-systems-target-visualization-codesys-hmi">
<h3>Visualization runtime systems (target visualization CODESYS HMI)<a class="headerlink" href="#visualization-runtime-systems-target-visualization-codesys-hmi" title="Permalink to this headline">¶</a></h3>
<p>For the Target-Visualization and the special target visualization
CODESYS HMI the position and size parameters of the window as well as
the update rate of the Target-Visualization can be configured in the
runtime system ini-file in section CmpTargetVisu.</p>
<p>Example:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">CmpTargetVisu</span><span class="p">]</span>
<span class="n">Application</span><span class="p">.</span><span class="n">Updaterate_ms</span><span class="o">=</span><span class="mi">200</span>
<span class="n">Application</span><span class="p">.</span><span class="n">WindowPositionX</span><span class="o">=</span><span class="mi">50</span>
<span class="n">Application</span><span class="p">.</span><span class="n">WindowPositionY</span><span class="o">=</span><span class="mi">50</span>
<span class="n">Application</span><span class="p">.</span><span class="n">WindowSizeWidth</span><span class="o">=</span><span class="mi">200</span>
<span class="n">Application</span><span class="p">.</span><span class="n">WindowSizeHeight</span><span class="o">=</span><span class="mi">200</span>
<span class="n">Application</span><span class="p">.</span><span class="n">WindowType</span><span class="o">=</span><span class="mi">0</span>
<span class="n">App2</span><span class="p">.</span><span class="n">WindowPositionX</span><span class="o">=</span><span class="mi">300</span>
<span class="n">App2</span><span class="p">.</span><span class="n">WindowPositionY</span><span class="o">=</span><span class="mi">300</span>
<span class="n">App2</span><span class="p">.</span><span class="n">WindowSizeWidth</span><span class="o">=</span><span class="mi">200</span>
<span class="n">App2</span><span class="p">.</span><span class="n">WindowSizeHeight</span><span class="o">=</span><span class="mi">200</span>
<span class="n">App2</span><span class="p">.</span><span class="n">WindowType</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-your-own-configuration-with-the-rtsconfigurator">
<h2>5.10.2.7. Create your own configuration with the RtsConfigurator<a class="headerlink" href="#create-your-own-configuration-with-the-rtsconfigurator" title="Permalink to this headline">¶</a></h2>
<p>For your system, you may want to define a specific set of components,
including standard components and own components such as IO drivers (see
below).</p>
<p>As there are a lot of dependencies between the components, it may not be
easy to find a valid combination of components. To solve this problem,
you can use the tool “RtsConfigurator”. This windows tool checks the
dependencies between the components according the m4 files. It helps you
to select the components you need.</p>
<p>If you have a valid configuration, it can create the following output
files for you:</p>
<ul class="simple">
<li><p>A list of used components</p></li>
<li><p>A list of used C-Files</p></li>
<li><p>A template for a makefile</p></li>
<li><p>A *.cfg file for the component manager</p></li>
<li><dl class="simple">
<dt>A *.h file with definitions needed for you main*.c file</dt><dd><p>(COMPO_INIT_DECL and COMPO_INIT_LIST)</p>
</dd>
</dl>
</li>
<li><p>A reference documentation for the selected components</p></li>
</ul>
<p>Please check the RTSconfigurator.chm file for further details.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="customer_impl_own_components.html" title="5.10.3. Implementing own components"
             >next</a> |</li>
        <li class="right" >
          <a href="customer_versions.html" title="5.10.1. Versions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RuntimeSystemDocumentation V3.5.16.40</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >5. Architecture Manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="customer.html" >5.10. Customer Adaptations and Expansions</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, 3S-Smart Software Solutions GmbH. This document is confidential. Unauthorized copying, disclosure or distribution of this document and the information contained herein is strictly forbidden.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>